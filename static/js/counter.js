class C{withFields(e){let n=Object.keys(this).map(s=>s in e?e[s]:this[s]);return new this.constructor(...n)}}class Qe{static fromArray(e,n){let s=n||new x;for(let i=e.length-1;i>=0;--i)s=new Te(e[i],s);return s}[Symbol.iterator](){return new tn(this)}toArray(){return[...this]}atLeastLength(e){let n=this;for(;e-- >0&&n;)n=n.tail;return n!==void 0}hasLength(e){let n=this;for(;e-- >0&&n;)n=n.tail;return e===-1&&n instanceof x}countLength(){let e=this,n=0;for(;e;)e=e.tail,n++;return n-1}}function _(t,e){return new Te(t,e)}function q(t,e){return Qe.fromArray(t,e)}class tn{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof x)return{done:!0};{let{head:e,tail:n}=this.#e;return this.#e=n,{value:e,done:!1}}}}class x extends Qe{}class Te extends Qe{constructor(e,n){super(),this.head=e,this.tail=n}}class Se extends C{static isResult(e){return e instanceof Se}}class Ne extends Se{constructor(e){super(),this[0]=e}isOk(){return!0}}class Ae extends Se{constructor(e){super(),this[0]=e}isOk(){return!1}}function nn(t,e,n,s,i,r,c){let a=new globalThis.Error(r);a.gleam_error=t,a.file=e,a.module=n,a.line=s,a.function=i,a.fn=i;for(let l in c)a[l]=c[l];return a}class J extends C{}class Z extends C{}class sn extends C{}class rn extends C{}class Q extends C{}class Ce extends C{}function Le(t,e){for(;;){let n=t,s=e;if(n instanceof x)return s;{let i=n.head;t=n.tail,e=_(i,s)}}}function X(t){return Le(t,q([]))}function cn(t,e){for(;;){let n=t,s=e;if(n instanceof x)return s;{let i=n.head;t=n.tail,e=_(i,s)}}}function an(t,e){return cn(X(t),e)}function We(t,e,n){for(;;){let s=t,i=e,r=n;if(s instanceof x)return i;{let c=s.head;t=s.tail,e=r(i,c),n=r}}}function ln(t,e,n,s,i,r){for(;;){let c=t,a=e,l=n,u=s,h=i,k=r,b=_(h,l);if(c instanceof x)return u instanceof Q?_(X(b),k):_(b,k);{let g=c.head,w=c.tail,T=a(h,g);if(u instanceof Q)if(T instanceof J)t=w,e=a,n=b,s=u,i=g,r=k;else if(T instanceof Z)t=w,e=a,n=b,s=u,i=g,r=k;else{let d;u instanceof Q?d=_(X(b),k):d=_(b,k);let A=d;if(w instanceof x)return _(q([g]),A);{let m=w.head,y=w.tail,N,f=a(g,m);f instanceof J?N=new Q:f instanceof Z?N=new Q:N=new Ce;let v=N;t=y,e=a,n=q([g]),s=v,i=m,r=A}}else if(T instanceof J){let d;u instanceof Q?d=_(X(b),k):d=_(b,k);let A=d;if(w instanceof x)return _(q([g]),A);{let m=w.head,y=w.tail,N,f=a(g,m);f instanceof J?N=new Q:f instanceof Z?N=new Q:N=new Ce;let v=N;t=y,e=a,n=q([g]),s=v,i=m,r=A}}else if(T instanceof Z){let d;u instanceof Q?d=_(X(b),k):d=_(b,k);let A=d;if(w instanceof x)return _(q([g]),A);{let m=w.head,y=w.tail,N,f=a(g,m);f instanceof J?N=new Q:f instanceof Z?N=new Q:N=new Ce;let v=N;t=y,e=a,n=q([g]),s=v,i=m,r=A}}else t=w,e=a,n=b,s=u,i=g,r=k}}}function un(t,e,n,s){for(;;){let i=t,r=e,c=n,a=s;if(i instanceof x)return Le(r,a);if(r instanceof x)return Le(i,a);{let l=i.head,u=i.tail,h=r.head,k=r.tail,b=c(l,h);b instanceof J?(t=u,e=r,n=c,s=_(l,a)):(b instanceof Z,t=i,e=k,n=c,s=_(h,a))}}}function fn(t,e,n){for(;;){let s=t,i=e,r=n;if(s instanceof x)return X(r);{let c=s.tail;if(c instanceof x){let a=s.head;return X(_(X(a),r))}else{let a=s.head,l=c.head,u=c.tail,h=un(a,l,i,q([]));t=u,e=i,n=_(h,r)}}}}function hn(t,e,n,s){for(;;){let i=t,r=e,c=n,a=s;if(i instanceof x)return Le(r,a);if(r instanceof x)return Le(i,a);{let l=i.head,u=i.tail,h=r.head,k=r.tail,b=c(l,h);b instanceof J?(t=i,e=k,n=c,s=_(h,a)):(b instanceof Z,t=u,e=r,n=c,s=_(l,a))}}}function dn(t,e,n){for(;;){let s=t,i=e,r=n;if(s instanceof x)return X(r);{let c=s.tail;if(c instanceof x){let a=s.head;return X(_(X(a),r))}else{let a=s.head,l=c.head,u=c.tail,h=hn(a,l,i,q([]));t=u,e=i,n=_(h,r)}}}}function _n(t,e,n){for(;;){let s=t,i=e,r=n;if(s instanceof x)return s;if(i instanceof Q){if(s.tail instanceof x)return s.head;t=fn(s,r,q([])),e=new Ce,n=r}else if(s.tail instanceof x){let a=s.head;return X(a)}else t=dn(s,r,q([])),e=new Q,n=r}}function kn(t,e){if(t instanceof x)return t;{let n=t.tail;if(n instanceof x)return t;{let s=t.head,i=n.head,r=n.tail,c,a=e(s,i);a instanceof J?c=new Q:a instanceof Z?c=new Q:c=new Ce;let l=c,u=ln(r,e,q([s]),l,i,q([]));return _n(u,new Q,e)}}}function bn(t,e){for(;;){let n=t,s=e;if(n instanceof x)return s;{let i=n.head;t=n.tail,e=s+i}}}function mn(t){return bn(t,"")}class yt extends C{constructor(e){super(),this.function=e}}function wn(t,e){let n=e.function(t),s,i;return s=n[0],i=n[1],i instanceof x?new Ne(s):new Ae(i)}function gn(t){return new yt(e=>[t,q([])])}function Et(t,e){return new yt(n=>{let s=t.function(n),i,r;return i=s[0],r=s[1],[e(i),r]})}function Tt(t){return t.toString()}function xn(t,e){return t.startsWith(e)}function vn(t,e,n){return t?e:n()}function ne(t){return t}const le=()=>globalThis?.document,At="http://www.w3.org/1999/xhtml",Xe=1,Nt=3,yn=!!globalThis.HTMLElement?.prototype?.moveBefore,R=q([]),Fe=new rn,En=new sn,Tn=new J,An=new Z;function Ct(t,e){return t.name===e.name?An:t.name<e.name?Tn:En}class re extends C{constructor(e,n,s){super(),this.kind=e,this.name=n,this.value=s}}class $e extends C{constructor(e,n,s){super(),this.kind=e,this.name=n,this.value=s}}let z=class extends C{constructor(e,n,s,i,r,c,a,l,u){super(),this.kind=e,this.name=n,this.handler=s,this.include=i,this.prevent_default=r,this.stop_propagation=c,this.immediate=a,this.debounce=l,this.throttle=u}};class Lt extends C{constructor(e,n,s){super(),this.prevent_default=e,this.stop_propagation=n,this.message=s}}class Nn extends C{constructor(e){super(),this.kind=e}}function Cn(t,e){for(;;){let n=t,s=e;if(n instanceof x)return s;{let i=n.head;if(i instanceof re){let r=i.name;if(r==="")t=n.tail,e=s;else if(r==="class"){let c=i.value;if(c==="")t=n.tail,e=s;else{let a=n.tail;if(a instanceof x){let l=i;t=a,e=_(l,s)}else{let l=a.head;if(l instanceof re)if(l.name==="class"){let h=i.kind,k=c,b=a.tail,g=l.value,w=k+" "+g,T=new re(h,"class",w);t=_(T,b),e=s}else{let h=i;t=a,e=_(h,s)}else{let u=i;t=a,e=_(u,s)}}}}else if(r==="style"){let c=i.value;if(c==="")t=n.tail,e=s;else{let a=n.tail;if(a instanceof x){let l=i;t=a,e=_(l,s)}else{let l=a.head;if(l instanceof re)if(l.name==="style"){let h=i.kind,k=c,b=a.tail,g=l.value,w=k+";"+g,T=new re(h,"style",w);t=_(T,b),e=s}else{let h=i;t=a,e=_(h,s)}else{let u=i;t=a,e=_(u,s)}}}}else{let c=i;t=n.tail,e=_(c,s)}}else{let r=i;t=n.tail,e=_(r,s)}}}}function Ln(t){if(t instanceof x)return t;if(t.tail instanceof x)return t;{let s=kn(t,(i,r)=>Ct(r,i));return Cn(s,R)}}const Mt=0;function Mn(t,e){return new re(Mt,t,e)}const qn=1,qt=2;function Dn(t,e,n,s,i,r,c,a){return new z(qt,t,e,n,s,i,r,c,a)}const Dt=0,oe=new Nn(Dt),et=2;function On(t,e){return Mn(t,e)}class Rn extends C{constructor(e,n,s){super(),this.synchronous=e,this.before_paint=n,this.after_paint=s}}const Sn=new Rn(q([]),q([]),q([]));function tt(){return Sn}function ce(){return null}function Ot(t,e){const n=t?.get(e);return n!=null?new Ne(n):new Ae(void 0)}function He(t,e){return t&&t.has(e)}function Ye(t,e,n){return t??=new Map,t.set(e,n),t}function In(t,e){return t?.delete(e),t}class Rt extends C{}class St extends C{constructor(e,n){super(),this.key=e,this.parent=n}}class Fn extends C{constructor(e,n){super(),this.index=e,this.parent=n}}function Hn(t,e){for(;;){let n=t,s=e;if(s instanceof x)return!1;{let i=s.head,r=s.tail,c=xn(n,i);if(c)return c;t=n,e=r}}}function te(t,e,n){return n===""?new Fn(e,t):new St(n,t)}const Bn=new Rt,Re="	";function It(t,e){for(;;){let n=t,s=e;if(n instanceof Rt){if(s instanceof x)return"";{let i=s.tail;return mn(i)}}else if(n instanceof St){let i=n.key;t=n.parent,e=_(Re,_(i,s))}else{let i=n.index;t=n.parent,e=_(Re,_(Tt(i),s))}}}function jn(t){return It(t,q([]))}function Pn(t,e){return e instanceof x?!1:Hn(jn(t),e)}const Ft=`
`;function Ht(t,e){return It(t,q([Ft,e]))}class ke extends C{constructor(e,n,s,i,r){super(),this.kind=e,this.key=n,this.mapper=s,this.children=i,this.keyed_children=r}}class be extends C{constructor(e,n,s,i,r,c,a,l,u,h){super(),this.kind=e,this.key=n,this.mapper=s,this.namespace=i,this.tag=r,this.attributes=c,this.children=a,this.keyed_children=l,this.self_closing=u,this.void=h}}class me extends C{constructor(e,n,s,i){super(),this.kind=e,this.key=n,this.mapper=s,this.content=i}}class Bt extends C{constructor(e,n,s,i,r,c,a){super(),this.kind=e,this.key=n,this.mapper=s,this.namespace=i,this.tag=r,this.attributes=c,this.inner_html=a}}function Un(t,e){return e===""?t==="area"||t==="base"||t==="br"||t==="col"||t==="embed"||t==="hr"||t==="img"||t==="input"||t==="link"||t==="meta"||t==="param"||t==="source"||t==="track"?!0:t==="wbr":!1}function Vn(t,e){return e instanceof ke?new ke(e.kind,t,e.mapper,e.children,e.keyed_children):e instanceof be?new be(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.children,e.keyed_children,e.self_closing,e.void):e instanceof me?new me(e.kind,t,e.mapper,e.content):new Bt(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.inner_html)}const o=0;function Gn(t,e,n,s){return new ke(o,t,e,n,s)}const Me=1;function ze(t,e,n,s,i,r,c,a,l){return new be(Me,t,e,n,s,Ln(i),r,c,a,Un(s,n))}const Ie=2;function jt(t,e,n){return new me(Ie,t,e,n)}const Kn=3,nt=(t,e)=>t===e,ye=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return!1;const n=typeof t;return n!==typeof e||n!=="object"||t.constructor!==e.constructor?!1:Array.isArray(t)?Qn(t,e):Wn(t,e)},Qn=(t,e)=>{let n=t.length;if(n!==e.length)return!1;for(;n--;)if(!ye(t[n],e[n]))return!1;return!0},Wn=(t,e)=>{const n=Object.keys(t);let s=n.length;if(Object.keys(e).length!==s)return!1;for(;s--;){const i=n[s];if(!Object.hasOwn(e,i)||!ye(t[i],e[i]))return!1}return!0};class ue extends C{constructor(e,n,s){super(),this.handlers=e,this.dispatched_paths=n,this.next_dispatched_paths=s}}function Xn(){return new ue(ce(),R,R)}function Yn(t){return new ue(t.handlers,t.next_dispatched_paths,R)}function Pt(t,e,n){return In(t,Ht(e,n))}function qe(t,e,n){let s=Pt(t.handlers,e,n);return new ue(s,t.dispatched_paths,t.next_dispatched_paths)}function st(t,e,n){return We(n,t,(s,i)=>{if(i instanceof z){let r=i.name;return Pt(s,e,r)}else return s})}function zn(t,e,n,s){let i=_(e,t.next_dispatched_paths),r=new ue(t.handlers,t.dispatched_paths,i),c=Ot(r.handlers,e+Ft+n);if(c instanceof Ne){let a=c[0];return[r,wn(s,a)]}else return[r,new Ae(q([]))]}function Be(t,e){return Pn(e,t.dispatched_paths)}function Ut(t,e,n,s,i){return Ye(t,Ht(n,s),Et(i,r=>new Lt(r.prevent_default,r.stop_propagation,e(r.message))))}function De(t,e,n,s,i){let r=Ut(t.handlers,e,n,s,i);return new ue(r,t.dispatched_paths,t.next_dispatched_paths)}function it(t,e,n,s){return We(s,t,(i,r)=>{if(r instanceof z){let c=r.name,a=r.handler;return Ut(i,e,n,c,a)}else return i})}function Ee(t,e){let n=nt(t,ne);return nt(e,ne)?t:n?e:i=>t(e(i))}function rt(t,e,n,s){for(;;){let i=t,r=e,c=n,a=s;if(a instanceof x)return i;{let l=a.head,u=a.tail;t=Vt(i,r,c,l),e=r,n=c+1,s=u}}}function Vt(t,e,n,s){if(s instanceof ke){let i=s.children,r=te(e,n,s.key);return rt(t,r,0,i)}else if(s instanceof be){let i=s.attributes,r=s.children,c=te(e,n,s.key),l=st(t,c,i);return rt(l,c,0,r)}else{if(s instanceof me)return t;{let i=s.attributes,r=te(e,n,s.key);return st(t,r,i)}}}function ie(t,e,n,s){let i=Vt(t.handlers,e,n,s);return new ue(i,t.dispatched_paths,t.next_dispatched_paths)}function Ue(t,e,n,s,i){for(;;){let r=t,c=e,a=n,l=s,u=i;if(u instanceof x)return r;{let h=u.head,k=u.tail;t=Gt(r,c,a,l,h),e=c,n=a,s=l+1,i=k}}}function Gt(t,e,n,s,i){if(i instanceof ke){let r=i.children,c=te(n,s,i.key),a=Ee(e,i.mapper);return Ue(t,a,c,0,r)}else if(i instanceof be){let r=i.attributes,c=i.children,a=te(n,s,i.key),l=Ee(e,i.mapper),h=it(t,l,a,r);return Ue(h,l,a,0,c)}else{if(i instanceof me)return t;{let r=i.attributes,c=te(n,s,i.key),a=Ee(e,i.mapper);return it(t,a,c,r)}}}function de(t,e,n,s,i){let r=Gt(t.handlers,e,n,s,i);return new ue(r,t.dispatched_paths,t.next_dispatched_paths)}function Jn(t,e,n,s,i){let r=Ue(t.handlers,e,n,s,i);return new ue(r,t.dispatched_paths,t.next_dispatched_paths)}function Je(t,e,n){return ze("",ne,"",t,e,n,ce(),!1)}function Oe(t){return jt("",ne,t)}function Zn(){return jt("",ne,"")}function pn(t,e){return Je("div",t,e)}function ct(t,e){return Je("p",t,e)}function at(t,e){return Je("button",t,e)}class Ve extends C{constructor(e,n,s,i){super(),this.index=e,this.removed=n,this.changes=s,this.children=i}}class $n extends C{constructor(e,n){super(),this.kind=e,this.content=n}}class on extends C{constructor(e,n){super(),this.kind=e,this.inner_html=n}}class es extends C{constructor(e,n,s){super(),this.kind=e,this.added=n,this.removed=s}}class ts extends C{constructor(e,n,s){super(),this.kind=e,this.key=n,this.before=s}}class ns extends C{constructor(e,n,s){super(),this.kind=e,this.index=n,this.with=s}}class ss extends C{constructor(e,n){super(),this.kind=e,this.index=n}}class is extends C{constructor(e,n,s){super(),this.kind=e,this.children=n,this.before=s}}function lt(t,e,n,s){return new Ve(t,e,n,s)}const Kt=0;function rs(t){return new $n(Kt,t)}const Qt=1;function cs(t){return new on(Qt,t)}const Wt=2;function ut(t,e){return new es(Wt,t,e)}const Xt=3;function as(t,e){return new ts(Xt,t,e)}const Yt=4;function ls(t){return new ss(Yt,t)}const zt=5;function xe(t,e){return new ns(zt,t,e)}const Jt=6;function ft(t,e){return new is(Jt,t,e)}class ht extends C{constructor(e,n){super(),this.patch=e,this.events=n}}class us extends C{constructor(e,n,s){super(),this.added=e,this.removed=n,this.events=s}}function fs(t,e,n,s){return n==="input"&&e===""||n==="select"&&e===""||n==="textarea"&&e===""?Be(t,s):!1}function dt(t,e,n,s,i,r,c,a){for(;;){let l=t,u=e,h=n,k=s,b=i,g=r,w=c,T=a;if(g instanceof x){if(b instanceof x)return new us(w,T,k);{let d=b.head;if(d instanceof z){let A=d,m=b.tail,y=d.name,N=_(A,T),f=qe(k,u,y);t=l,e=u,n=h,s=f,i=m,r=g,c=w,a=N}else{let A=d,m=b.tail,y=_(A,T);t=l,e=u,n=h,s=k,i=m,r=g,c=w,a=y}}}else if(b instanceof x){let d=g.head;if(d instanceof z){let A=d,m=g.tail,y=d.name,N=d.handler,f=_(A,w),v=De(k,h,u,y,N);t=l,e=u,n=h,s=v,i=b,r=m,c=f,a=T}else{let A=d,m=g.tail,y=_(A,w);t=l,e=u,n=h,s=k,i=b,r=m,c=y,a=T}}else{let d=g.head,A=g.tail,m=b.head,y=b.tail,N=Ct(m,d);if(N instanceof J)if(m instanceof z){let f=m.name,v=_(m,T),E=qe(k,u,f);t=l,e=u,n=h,s=E,i=y,r=g,c=w,a=v}else{let f=_(m,T);t=l,e=u,n=h,s=k,i=y,r=g,c=w,a=f}else if(N instanceof Z)if(d instanceof re)if(m instanceof re){let f,v=d.name;v==="value"||v==="checked"||v==="selected"?f=l||m.value!==d.value:f=m.value!==d.value;let E=f,M;E?M=_(d,w):M=w;let D=M;t=l,e=u,n=h,s=k,i=y,r=A,c=D,a=T}else if(m instanceof z){let f=m.name,v=_(d,w),E=_(m,T),M=qe(k,u,f);t=l,e=u,n=h,s=M,i=y,r=A,c=v,a=E}else{let f=_(d,w),v=_(m,T);t=l,e=u,n=h,s=k,i=y,r=A,c=f,a=v}else if(d instanceof $e)if(m instanceof $e){let f,v=d.name;v==="scrollLeft"||v==="scrollRight"?f=!0:v==="value"||v==="checked"||v==="selected"?f=l||!ye(m.value,d.value):f=!ye(m.value,d.value);let E=f,M;E?M=_(d,w):M=w;let D=M;t=l,e=u,n=h,s=k,i=y,r=A,c=D,a=T}else if(m instanceof z){let f=m.name,v=_(d,w),E=_(m,T),M=qe(k,u,f);t=l,e=u,n=h,s=M,i=y,r=A,c=v,a=E}else{let f=_(d,w),v=_(m,T);t=l,e=u,n=h,s=k,i=y,r=A,c=f,a=v}else if(m instanceof z){let f=d.name,v=d.handler,E=m.prevent_default.kind!==d.prevent_default.kind||m.stop_propagation.kind!==d.stop_propagation.kind||m.immediate!==d.immediate||m.debounce!==d.debounce||m.throttle!==d.throttle,M;E?M=_(d,w):M=w;let D=M,I=De(k,h,u,f,v);t=l,e=u,n=h,s=I,i=y,r=A,c=D,a=T}else{let f=d.name,v=d.handler,E=_(d,w),M=_(m,T),D=De(k,h,u,f,v);t=l,e=u,n=h,s=D,i=y,r=A,c=E,a=M}else if(d instanceof z){let f=d.name,v=d.handler,E=_(d,w),M=De(k,h,u,f,v);t=l,e=u,n=h,s=M,i=b,r=A,c=E,a=T}else{let f=_(d,w);t=l,e=u,n=h,s=k,i=b,r=A,c=f,a=T}}}}function Ge(t,e,n,s,i,r,c,a,l,u,h,k,b,g){for(;;){let w=t,T=e,d=n,A=s,m=i,y=r,N=c,f=a,v=l,E=u,M=h,D=k,I=b,K=g;if(d instanceof x){if(w instanceof x)return new ht(new Ve(v,N,M,D),K);{let W=w.head,p=w.tail,U;W.key===""||!He(m,W.key)?U=N+1:U=N;let L=U,j=ie(K,E,f,W);t=p,e=T,n=d,s=A,i=m,r=y,c=L,a=f,l=v,u=E,h=M,k=D,b=I,g=j}}else if(w instanceof x){let W=Jn(K,I,E,f,d),p=ft(d,f-y),U=_(p,M);return new ht(new Ve(v,N,U,D),W)}else{let W=d.head,p=w.head;if(p.key!==W.key){let U=d.tail,P=w.tail,L=Ot(T,W.key),j=He(A,p.key);if(L instanceof Ne)if(j){let S=L[0];if(He(m,p.key))t=P,e=T,n=d,s=A,i=m,r=y-1,c=N,a=f,l=v,u=E,h=M,k=D,b=I,g=K;else{let B=f-y,O=_(as(W.key,B),M),V=Ye(m,W.key,void 0),H=y+1;t=_(S,w),e=T,n=d,s=A,i=V,r=H,c=N,a=f,l=v,u=E,h=O,k=D,b=I,g=K}}else{let S=f-y,F=_(ls(S),M),B=ie(K,E,f,p),O=y-1;t=P,e=T,n=d,s=A,i=m,r=O,c=N,a=f,l=v,u=E,h=F,k=D,b=I,g=B}else if(j){let S=f-y,F=de(K,I,E,f,W),B=ft(q([W]),S),O=_(B,M);t=w,e=T,n=U,s=A,i=m,r=y+1,c=N,a=f+1,l=v,u=E,h=O,k=D,b=I,g=F}else{let S=xe(f-y,W),F,O=ie(K,E,f,p);F=de(O,I,E,f,W);let V=F;t=P,e=T,n=U,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(S,M),k=D,b=I,g=V}}else{let U=w.head;if(U instanceof ke){let P=d.head;if(P instanceof ke){let L=P,j=d.tail,S=U,F=w.tail,B=Ee(I,L.mapper),O=te(E,f,L.key),V=Ge(S.children,S.keyed_children,L.children,L.keyed_children,ce(),0,0,0,f,O,R,R,B,K),H,G=V.patch;G.children instanceof x&&G.changes instanceof x&&G.removed===0?H=D:H=_(V.patch,D);let Y=H;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=M,k=Y,b=I,g=V.events}else{let L=P,j=d.tail,S=U,F=w.tail,B=xe(f-y,L),O,H=ie(K,E,f,S);O=de(H,I,E,f,L);let G=O;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(B,M),k=D,b=I,g=G}}else if(U instanceof be){let P=d.head;if(P instanceof be){let L=P,j=U;if(j.namespace===L.namespace&&j.tag===L.tag){let S=d.tail,F=w.tail,B=Ee(I,L.mapper),O=te(E,f,L.key),V=fs(K,L.namespace,L.tag,O),H=dt(V,O,B,K,j.attributes,L.attributes,R,R),G,$,Y;G=H.added,$=H.removed,Y=H.events;let fe;$ instanceof x&&G instanceof x?fe=R:fe=q([ut(G,$)]);let we=fe,ge=Ge(j.children,j.keyed_children,L.children,L.keyed_children,ce(),0,0,0,f,O,we,R,B,Y),se,he=ge.patch;he.children instanceof x&&he.changes instanceof x&&he.removed===0?se=D:se=_(ge.patch,D);let en=se;t=F,e=T,n=S,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=M,k=en,b=I,g=ge.events}else{let S=P,F=d.tail,B=U,O=w.tail,V=xe(f-y,S),H,$=ie(K,E,f,B);H=de($,I,E,f,S);let Y=H;t=O,e=T,n=F,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(V,M),k=D,b=I,g=Y}}else{let L=P,j=d.tail,S=U,F=w.tail,B=xe(f-y,L),O,H=ie(K,E,f,S);O=de(H,I,E,f,L);let G=O;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(B,M),k=D,b=I,g=G}}else if(U instanceof me){let P=d.head;if(P instanceof me){let L=P;if(U.content===L.content){let S=d.tail;t=w.tail,e=T,n=S,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=M,k=D,b=I,g=K}else{let S=P,F=d.tail,B=w.tail,O=lt(f,0,q([rs(S.content)]),R);t=B,e=T,n=F,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=M,k=_(O,D),b=I,g=K}}else{let L=P,j=d.tail,S=U,F=w.tail,B=xe(f-y,L),O,H=ie(K,E,f,S);O=de(H,I,E,f,L);let G=O;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(B,M),k=D,b=I,g=G}}else{let P=d.head;if(P instanceof Bt){let L=P,j=d.tail,S=U,F=w.tail,B=Ee(I,L.mapper),O=te(E,f,L.key),V=dt(!1,O,B,K,S.attributes,L.attributes,R,R),H,G,$;H=V.added,G=V.removed,$=V.events;let Y;G instanceof x&&H instanceof x?Y=R:Y=q([ut(H,G)]);let fe=Y,we;S.inner_html===L.inner_html?we=fe:we=_(cs(L.inner_html),fe);let se=we,he;se instanceof x?he=D:he=_(lt(f,0,se,q([])),D);let pe=he;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=M,k=pe,b=I,g=$}else{let L=P,j=d.tail,S=U,F=w.tail,B=xe(f-y,L),O,H=ie(K,E,f,S);O=de(H,I,E,f,L);let G=O;t=F,e=T,n=j,s=A,i=m,r=y,c=N,a=f+1,l=v,u=E,h=_(B,M),k=D,b=I,g=G}}}}}}function hs(t,e,n){return Ge(q([e]),ce(),q([n]),ce(),ce(),0,0,0,0,Bn,R,R,ne,Yn(t))}const ds=globalThis.setTimeout,je=globalThis.clearTimeout,_s=(t,e)=>le().createElementNS(t,e),ks=t=>le().createTextNode(t),bs=()=>le().createDocumentFragment(),ve=(t,e,n)=>t.insertBefore(e,n),_t=yn?(t,e,n)=>t.moveBefore(e,n):ve,ms=(t,e)=>t.removeChild(e),ws=(t,e)=>t.getAttribute(e),kt=(t,e,n)=>t.setAttribute(e,n),gs=(t,e)=>t.removeAttribute(e),xs=(t,e,n,s)=>t.addEventListener(e,n,s),bt=(t,e,n)=>t.removeEventListener(e,n),vs=(t,e)=>t.innerHTML=e,ys=(t,e)=>t.data=e,ee=Symbol("lustre");class Es{constructor(e,n,s,i){this.kind=e,this.key=i,this.parent=n,this.children=[],this.node=s,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===o?this.node.parentNode:this.node}}const ae=(t,e,n,s,i)=>{const r=new Es(t,e,n,i);return n[ee]=r,e?.children.splice(s,0,r),r},Ts=t=>{let e="";for(let n=t[ee];n.parent;n=n.parent)if(n.key)e=`${Re}${n.key}${e}`;else{const s=n.parent.children.indexOf(n);e=`${Re}${s}${e}`}return e.slice(1)};class As{#e=null;#i=()=>{};#u=!1;#f=!1;constructor(e,n,{useServerEvents:s=!1,exposeKeys:i=!1}={}){this.#e=e,this.#i=n,this.#u=s,this.#f=i}mount(e){ae(Me,null,this.#e,0,null),this.#g(this.#e,null,this.#e[ee],0,e)}push(e){this.#t.push({node:this.#e[ee],patch:e}),this.#k()}#t=[];#k(){const e=this.#t;for(;e.length;){const{node:n,patch:s}=e.pop(),{children:i}=n,{changes:r,removed:c,children:a}=s;_e(r,l=>this.#r(n,l)),c&&this.#_(n,i.length-c,c),_e(a,l=>{const u=i[l.index|0];this.#t.push({node:u,patch:l})})}}#r(e,n){switch(n.kind){case Kt:this.#T(e,n);break;case Qt:this.#x(e,n);break;case Wt:this.#b(e,n);break;case Xt:this.#c(e,n);break;case Yt:this.#s(e,n);break;case zt:this.#d(e,n);break;case Jt:this.#h(e,n);break}}#h(e,{children:n,before:s}){const i=bs(),r=this.#n(e,s);this.#w(i,null,e,s|0,n),ve(e.parentNode,i,r)}#d(e,{index:n,with:s}){this.#_(e,n|0,1);const i=this.#n(e,n);this.#g(e.parentNode,i,e,n|0,s)}#n(e,n){n=n|0;const{children:s}=e,i=s.length;if(n<i)return s[n].node;let r=s[i-1];if(!r&&e.kind!==o)return null;for(r||(r=e);r.kind===o&&r.children.length;)r=r.children[r.children.length-1];return r.node.nextSibling}#c(e,{key:n,before:s}){s=s|0;const{children:i,parentNode:r}=e,c=i[s].node;let a=i[s];for(let k=s+1;k<i.length;++k){const b=i[k];if(i[k]=a,a=b,b.key===n){i[s]=b;break}}const{kind:l,node:u,children:h}=a;_t(r,u,c),l===o&&this.#a(r,h,c)}#a(e,n,s){for(let i=0;i<n.length;++i){const{kind:r,node:c,children:a}=n[i];_t(e,c,s),r===o&&this.#a(e,a,s)}}#s(e,{index:n}){this.#_(e,n,1)}#_(e,n,s){const{children:i,parentNode:r}=e,c=i.splice(n,s);for(let a=0;a<c.length;++a){const{kind:l,node:u,children:h}=c[a];ms(r,u),this.#l(c[a]),l===o&&c.push(...h)}}#l(e){const{debouncers:n,children:s}=e;for(const{timeout:i}of n.values())i&&je(i);n.clear(),_e(s,i=>this.#l(i))}#b({node:e,handlers:n,throttles:s,debouncers:i},{added:r,removed:c}){_e(c,({name:a})=>{n.delete(a)?(bt(e,a,Pe),this.#m(s,a,0),this.#m(i,a,0)):(gs(e,a),wt[a]?.removed?.(e,a))}),_e(r,a=>this.#E(e,a))}#T({node:e},{content:n}){ys(e,n??"")}#x({node:e},{inner_html:n}){vs(e,n??"")}#w(e,n,s,i,r){_e(r,c=>this.#g(e,n,s,i++,c))}#g(e,n,s,i,r){switch(r.kind){case Me:{const c=this.#v(s,i,r);this.#w(c,null,c[ee],0,r.children),ve(e,c,n);break}case Ie:{const c=this.#y(s,i,r);ve(e,c,n);break}case o:{const c=this.#y(s,i,r);ve(e,c,n),this.#w(e,n,c[ee],0,r.children);break}case Kn:{const c=this.#v(s,i,r);this.#x({node:c},r),ve(e,c,n);break}}}#v(e,n,{kind:s,key:i,tag:r,namespace:c,attributes:a}){const l=_s(c||At,r);return ae(s,e,l,n,i),this.#f&&i&&kt(l,"data-lustre-key",i),_e(a,u=>this.#E(l,u)),l}#y(e,n,{kind:s,key:i,content:r}){const c=ks(r??"");return ae(s,e,c,n,i),c}#E(e,n){const{debouncers:s,handlers:i,throttles:r}=e[ee],{kind:c,name:a,value:l,prevent_default:u,debounce:h,throttle:k}=n;switch(c){case Mt:{const b=l??"";if(a==="virtual:defaultValue"){e.defaultValue=b;return}b!==ws(e,a)&&kt(e,a,b),wt[a]?.added?.(e,b);break}case qn:e[a]=l;break;case qt:{i.has(a)&&bt(e,a,Pe);const b=u.kind===Dt;xs(e,a,Pe,{passive:b}),this.#m(r,a,k),this.#m(s,a,h),i.set(a,g=>this.#A(n,g));break}}}#m(e,n,s){const i=e.get(n);if(s>0)i?i.delay=s:e.set(n,{delay:s});else if(i){const{timeout:r}=i;r&&je(r),e.delete(n)}}#A(e,n){const{currentTarget:s,type:i}=n,{debouncers:r,throttles:c}=s[ee],a=Ts(s),{prevent_default:l,stop_propagation:u,include:h,immediate:k}=e;l.kind===et&&n.preventDefault(),u.kind===et&&n.stopPropagation(),i==="submit"&&(n.detail??={},n.detail.formData=[...new FormData(n.target,n.submitter).entries()]);const b=this.#u?Ns(n,h??[]):n,g=c.get(i);if(g){const T=Date.now(),d=g.last||0;T>d+g.delay&&(g.last=T,g.lastEvent=n,this.#i(b,a,i,k))}const w=r.get(i);w&&(je(w.timeout),w.timeout=ds(()=>{n!==c.get(i)?.lastEvent&&this.#i(b,a,i,k)},w.delay)),!g&&!w&&this.#i(b,a,i,k)}}const _e=(t,e)=>{if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else if(t)for(t;t.head;t=t.tail)e(t.head)},Pe=t=>{const{currentTarget:e,type:n}=t;e[ee].handlers.get(n)(t)},Ns=(t,e=[])=>{const n={};(t.type==="input"||t.type==="change")&&e.push("target.value"),t.type==="submit"&&e.push("detail.formData");for(const s of e){const i=s.split(".");for(let r=0,c=t,a=n;r<i.length;r++){if(r===i.length-1){a[i[r]]=c[i[r]];break}a=a[i[r]]??={},c=c[i[r]]}}return n},mt=t=>({added(e){e[t]=!0},removed(e){e[t]=!1}}),Cs=t=>({added(e,n){e[t]=n}}),wt={checked:mt("checked"),selected:mt("selected"),value:Cs("value"),autofocus:{added(t){queueMicrotask(()=>{t.focus?.()})}},autoplay:{added(t){try{t.play?.()}catch(e){console.error(e)}}}};function Ls(t,e,n){for(;;){let s=t,i=e,r=n;if(s instanceof x)return[i,X(r)];{let c=s.tail,a=s.head[0],l=s.head[1],u=Vn(a,l),h;a===""?h=i:h=Ye(i,a,u);let k=h,b=_(u,r);t=c,e=k,n=b}}}function Ze(t){return Ls(t,ce(),R)}function Ms(t,e,n){let s=Ze(n),i,r;return i=s[0],r=s[1],ze("",ne,"",t,e,r,i,!1)}function qs(t,e,n,s){let i=Ze(s),r,c;return r=i[0],c=i[1],ze("",ne,t,e,n,c,r,!1)}function Ds(t){let e=Ze(t),n,s;return n=e[0],s=e[1],Gn("",ne,s,n)}const Os=t=>{const e=ae(Me,null,t,0,null);let n=0;for(let c=t.firstChild;c;c=c.nextSibling)Zt(c)&&(n+=1);if(n===0){const c=le().createTextNode("");return ae(Ie,e,c,0,null),t.replaceChildren(c),Zn()}if(n===1)return Ke(e,t).head[1];const s=le().createTextNode(""),i=ae(o,e,s,0,null),r=Ke(i,t);return t.insertBefore(s,t.firstChild),Ds(r)},Zt=t=>{switch(t.nodeType){case Xe:return!0;case Nt:return!!t.data;default:return!1}},Rs=(t,e,n,s)=>{if(!Zt(e))return null;switch(e.nodeType){case Xe:{const i=ae(Me,t,e,s,n),r=e.localName,c=e.namespaceURI,a=!c||c===At;a&&Ss.includes(r)&&Is(r,e);const l=Fs(e),u=Ke(i,e);return a?Ms(r,l,u):qs(c,r,l,u)}case Nt:return ae(Ie,t,e,s,null),Oe(e.data);default:return null}},Ss=["input","select","textarea"],Is=(t,e)=>{const n=e.value,s=e.checked;t==="input"&&e.type==="checkbox"&&!s||t==="input"&&e.type==="radio"&&!s||e.type!=="checkbox"&&e.type!=="radio"&&!n||queueMicrotask(()=>{e.value=n,e.checked=s,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),le().activeElement!==e&&e.dispatchEvent(new Event("blur",{bubbles:!0}))})},Ke=(t,e)=>{let n=null,s=e.firstChild,i=null,r=0;for(;s;){const c=s.nodeType===Xe?s.getAttribute("data-lustre-key"):null;c!=null&&s.removeAttribute("data-lustre-key");const a=Rs(t,s,c,r),l=s.nextSibling;if(a){const u=new Te([c??"",a],null);i?i=i.tail=u:i=n=u,r+=1}else e.removeChild(s);s=l}return i?(i.tail=R,n):R},Fs=t=>{let e=t.attributes.length,n=R;for(;e-- >0;){const s=t.attributes[e];s.name!=="xmlns"&&(n=new Te(Hs(s),n))}return n},Hs=t=>{const e=t.localName,n=t.value;return On(e,n)},pt=()=>!!le();class Bs{constructor(e,[n,s],i,r){this.root=e,this.#e=n,this.#i=i,this.#u=r,this.root.addEventListener("context-request",c=>{if(!(c.context&&c.callback)||!this.#r.has(c.context))return;c.stopImmediatePropagation();const a=this.#r.get(c.context);if(c.subscribe){const l=new WeakRef(c.callback),u=()=>{a.subscribers=a.subscribers.filter(h=>h!==l)};a.subscribers.push([l,u]),c.callback(a.value,u)}else c.callback(a.value)}),this.#k=new As(this.root,(c,a,l)=>{const[u,h]=zn(this.#t,a,l,c);if(this.#t=u,h.isOk()){const k=h[0];k.stop_propagation&&c.stopPropagation(),k.prevent_default&&c.preventDefault(),this.dispatch(k.message,!1)}}),this.#f=Os(this.root),this.#t=Xn(),this.#s=!0,this.#l(s)}root=null;dispatch(e,n=!1){if(this.#s||=n,this.#h)this.#d.push(e);else{const[s,i]=this.#u(this.#e,e);this.#e=s,this.#l(i)}}emit(e,n){(this.root.host??this.root).dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,composed:!0}))}provide(e,n){if(!this.#r.has(e))this.#r.set(e,{value:n,subscribers:[]});else{const s=this.#r.get(e);s.value=n;for(let i=s.subscribers.length-1;i>=0;i--){const[r,c]=s.subscribers[i],a=r.deref();if(!a){s.subscribers.splice(i,1);continue}a(n,c)}}}#e;#i;#u;#f;#t;#k;#r=new Map;#h=!1;#d=[];#n=R;#c=R;#a=null;#s=!1;#_={dispatch:(e,n)=>this.dispatch(e,n),emit:(e,n)=>this.emit(e,n),select:()=>{},root:()=>this.root,provide:(e,n)=>this.provide(e,n)};#l(e){for(this.#h=!0;;){for(let n=e.synchronous;n.tail;n=n.tail)n.head(this.#_);if(this.#n=xt(this.#n,e.before_paint),this.#c=xt(this.#c,e.after_paint),!this.#d.length)break;[this.#e,e]=this.#u(this.#e,this.#d.shift())}this.#h=!1,this.#s?(cancelAnimationFrame(this.#a),this.#b()):this.#a||(this.#a=requestAnimationFrame(()=>{this.#b()}))}#b(){this.#s=!1,this.#a=null;const e=this.#i(this.#e),{patch:n,events:s}=hs(this.#t,this.#f,e);if(this.#t=s,this.#f=e,this.#k.push(n),this.#n instanceof Te){const i=gt(this.#n);this.#n=R,queueMicrotask(()=>{this.#s=!0,this.#l(i)})}if(this.#c instanceof Te){const i=gt(this.#c);this.#c=R,requestAnimationFrame(()=>{this.#s=!0,this.#l(i)})}}}function gt(t){return{synchronous:t,after_paint:R,before_paint:R}}function xt(t,e){return t instanceof x?e:e instanceof x?t:an(t,e)}class js extends C{constructor(e){super(),this.message=e}}class Ps extends C{constructor(e,n){super(),this.name=e,this.data=n}}class Us extends C{constructor(e,n,s,i,r,c,a,l,u,h){super(),this.open_shadow_root=e,this.adopt_styles=n,this.delegates_focus=s,this.attributes=i,this.properties=r,this.contexts=c,this.is_form_associated=a,this.on_form_autofill=l,this.on_form_reset=u,this.on_form_restore=h}}function Vs(t){let e=new Us(!0,!0,!1,R,R,R,!1,Fe,Fe,Fe);return We(t,e,(n,s)=>s.apply(n))}class Gs{#e;constructor(e,[n,s],i,r){this.#e=new Bs(e,[n,s],r,i)}send(e){switch(e.constructor){case js:{this.dispatch(e.message,!1);break}case Ps:{this.emit(e.name,e.data);break}}}dispatch(e,n){this.#e.dispatch(e,n)}emit(e,n){this.#e.emit(e,n)}}const Ks=({init:t,update:e,view:n},s,i)=>{if(!pt())return new Ae(new $t);const r=s instanceof HTMLElement?s:le().querySelector(s);return r?new Ne(new Gs(r,t(i),e,n)):new Ae(new Ws(s))};class Qs extends C{constructor(e,n,s,i){super(),this.init=e,this.update=n,this.view=s,this.config=i}}class Ws extends C{constructor(e){super(),this.selector=e}}class $t extends C{}function Xs(t,e,n){return new Qs(t,e,n,Vs(R))}function Ys(t,e,n){return Xs(r=>[t(r),tt()],(r,c)=>[e(r,c),tt()],n)}function zs(t,e,n){return vn(!pt(),new Ae(new $t),()=>Ks(t,e,n))}function Js(t){return!1}function Zs(t,e){return Dn(t,Et(e,n=>new Lt(!1,!1,n)),R,oe,oe,Js(),0,0)}function vt(t){return Zs("click",gn(t))}const ps="src/components/counter.gleam";class ot extends C{}class $s extends C{}function os(t){return 0}function ei(t,e){return e instanceof ot?t+2:t-2}function ti(t){let e=Tt(t);return pn(q([]),q([ct(q([]),q([Oe(e+" ✨")])),ct(q([]),q([at(q([vt(new $s)]),q([Oe("-")])),at(q([vt(new ot)]),q([Oe("+")]))]))]))}function ni(){let t=Ys(os,ei,ti),e=zs(t,"[gleam_example]",void 0),n;if(e instanceof Ne)n=e[0];else throw nn("let_assert",ps,"components/counter",10,"main","Pattern match failed, no pattern matched the value.",{value:e,start:204,end:271,pattern_start:215,pattern_end:227});return n}document.addEventListener("DOMContentLoaded",()=>{ni()});
