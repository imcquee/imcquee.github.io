class B{withFields(e){let n=Object.keys(this).map(i=>i in e?e[i]:this[i]);return new this.constructor(...n)}}class yt{static fromArray(e,n){let i=n||new A;for(let s=e.length-1;s>=0;--s)i=new Ae(e[s],i);return i}[Symbol.iterator](){return new Zn(this)}toArray(){return[...this]}atLeastLength(e){let n=this;for(;e-- >0&&n;)n=n.tail;return n!==void 0}hasLength(e){let n=this;for(;e-- >0&&n;)n=n.tail;return e===-1&&n instanceof A}countLength(){let e=this,n=0;for(;e;)e=e.tail,n++;return n-1}}function m(t,e){return new Ae(t,e)}function M(t,e){return yt.fromArray(t,e)}class Zn{#e;constructor(e){this.#e=e}next(){if(this.#e instanceof A)return{done:!0};{let{head:e,tail:n}=this.#e;return this.#e=n,{value:e,done:!1}}}}class A extends yt{}class Ae extends yt{constructor(e,n){super(),this.head=e,this.tail=n}}class pn{bitSize;byteSize;bitOffset;rawBuffer;constructor(e,n,i){if(!(e instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??e.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=i??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(e.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=e}byteAt(e){if(!(e<0||e>=this.byteSize))return Ie(this.rawBuffer,this.bitOffset,e)}equals(e){if(this.bitSize!==e.bitSize)return!1;const n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&e.bitOffset===0){for(let s=0;s<n;s++)if(this.rawBuffer[s]!==e.rawBuffer[s])return!1;const i=this.bitSize%8;if(i){const s=8-i;if(this.rawBuffer[n]>>s!==e.rawBuffer[n]>>s)return!1}}else{for(let s=0;s<n;s++){const r=Ie(this.rawBuffer,this.bitOffset,s),a=Ie(e.rawBuffer,e.bitOffset,s);if(r!==a)return!1}const i=this.bitSize%8;if(i){const s=Ie(this.rawBuffer,this.bitOffset,n),r=Ie(e.rawBuffer,e.bitOffset,n),a=8-i;if(s>>a!==r>>a)return!1}}return!0}get buffer(){if(Mt("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Mt("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function Ie(t,e,n){if(e===0)return t[n]??0;{const i=t[n]<<e&255,s=t[n+1]>>8-e;return i|s}}const zt={};function Mt(t,e){zt[t]||(console.warn(`Deprecated BitArray.${t} property used in JavaScript FFI code. ${e}.`),zt[t]=!0)}class Ve extends B{static isResult(e){return e instanceof Ve}}class ce extends Ve{constructor(e){super(),this[0]=e}isOk(){return!0}}class Te extends Ve{constructor(e){super(),this[0]=e}isOk(){return!1}}function fe(t,e){let n=[t,e];for(;n.length;){let i=n.pop(),s=n.pop();if(i===s)continue;if(!Ct(i)||!Ct(s)||!ri(i,s)||$n(i,s)||ei(i,s)||ti(i,s)||ni(i,s)||ii(i,s)||si(i,s))return!1;const a=Object.getPrototypeOf(i);if(a!==null&&typeof a.equals=="function")try{if(i.equals(s))continue;return!1}catch{}let[u,c]=on(i);const l=u(i),d=u(s);if(l.length!==d.length)return!1;for(let _ of l)n.push(c(i,_),c(s,_))}return!0}function on(t){if(t instanceof Map)return[e=>e.keys(),(e,n)=>e.get(n)];{let e=t instanceof globalThis.Error?["message"]:[];return[n=>[...e,...Object.keys(n)],(n,i)=>n[i]]}}function $n(t,e){return t instanceof Date&&(t>e||t<e)}function ei(t,e){return!(t instanceof pn)&&t.buffer instanceof ArrayBuffer&&t.BYTES_PER_ELEMENT&&!(t.byteLength===e.byteLength&&t.every((n,i)=>n===e[i]))}function ti(t,e){return Array.isArray(t)&&t.length!==e.length}function ni(t,e){return t instanceof Map&&t.size!==e.size}function ii(t,e){return t instanceof Set&&(t.size!=e.size||[...t].some(n=>!e.has(n)))}function si(t,e){return t instanceof RegExp&&(t.source!==e.source||t.flags!==e.flags)}function Ct(t){return typeof t=="object"&&t!==null}function ri(t,e){return typeof t!="object"&&typeof e!="object"&&(!t||!e)||[Promise,WeakSet,WeakMap,Function].some(i=>t instanceof i)?!1:t.constructor===e.constructor}function ai(t,e,n,i,s,r,a){let u=new globalThis.Error(r);u.gleam_error=t,u.file=e,u.module=n,u.line=i,u.function=s,u.fn=s;for(let c in a)u[c]=a[c];return u}class re extends B{}class ae extends B{}class ui extends B{}class ci extends B{}const Nt=new WeakMap,Qe=new DataView(new ArrayBuffer(8));let Je=0;function et(t){const e=Nt.get(t);if(e!==void 0)return e;const n=Je++;return Je===2147483647&&(Je=0),Nt.set(t,n),n}function tt(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function wt(t){let e=0;const n=t.length;for(let i=0;i<n;i++)e=Math.imul(31,e)+t.charCodeAt(i)|0;return e}function ln(t){Qe.setFloat64(0,t);const e=Qe.getInt32(0),n=Qe.getInt32(4);return Math.imul(73244475,e>>16^e)^n}function li(t){return wt(t.toString())}function fi(t){const e=Object.getPrototypeOf(t);if(e!==null&&typeof e.hashCode=="function")try{const i=t.hashCode(t);if(typeof i=="number")return i}catch{}if(t instanceof Promise||t instanceof WeakSet||t instanceof WeakMap)return et(t);if(t instanceof Date)return ln(t.getTime());let n=0;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||t instanceof Uint8Array)for(let i=0;i<t.length;i++)n=Math.imul(31,n)+ee(t[i])|0;else if(t instanceof Set)t.forEach(i=>{n=n+ee(i)|0});else if(t instanceof Map)t.forEach((i,s)=>{n=n+tt(ee(i),ee(s))|0});else{const i=Object.keys(t);for(let s=0;s<i.length;s++){const r=i[s],a=t[r];n=n+tt(ee(a),wt(r))|0}}return n}function ee(t){if(t===null)return 1108378658;if(t===void 0)return 1108378659;if(t===!0)return 1108378657;if(t===!1)return 1108378656;switch(typeof t){case"number":return ln(t);case"string":return wt(t);case"bigint":return li(t);case"object":return fi(t);case"symbol":return et(t);case"function":return et(t);default:return 0}}const le=5,gt=Math.pow(2,le),hi=gt-1,di=gt/2,_i=gt/4,Z=0,ue=1,o=2,Oe=3,kt={type:o,bitmap:0,array:[]};function Pe(t,e){return t>>>e&hi}function Xe(t,e){return 1<<Pe(t,e)}function mi(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function vt(t,e){return mi(t&e-1)}function te(t,e,n){const i=t.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=t[r];return s[e]=n,s}function bi(t,e,n){const i=t.length,s=new Array(i+1);let r=0,a=0;for(;r<e;)s[a++]=t[r++];for(s[a++]=n;r<i;)s[a++]=t[r++];return s}function nt(t,e){const n=t.length,i=new Array(n-1);let s=0,r=0;for(;s<e;)i[r++]=t[s++];for(++s;s<n;)i[r++]=t[s++];return i}function fn(t,e,n,i,s,r){const a=ee(e);if(a===i)return{type:Oe,hash:a,array:[{type:Z,k:e,v:n},{type:Z,k:s,v:r}]};const u={val:!1};return Fe(xt(kt,t,a,e,n,u),t,i,s,r,u)}function Fe(t,e,n,i,s,r){switch(t.type){case ue:return yi(t,e,n,i,s,r);case o:return xt(t,e,n,i,s,r);case Oe:return wi(t,e,n,i,s,r)}}function yi(t,e,n,i,s,r){const a=Pe(n,e),u=t.array[a];if(u===void 0)return r.val=!0,{type:ue,size:t.size+1,array:te(t.array,a,{type:Z,k:i,v:s})};if(u.type===Z)return fe(i,u.k)?s===u.v?t:{type:ue,size:t.size,array:te(t.array,a,{type:Z,k:i,v:s})}:(r.val=!0,{type:ue,size:t.size,array:te(t.array,a,fn(e+le,u.k,u.v,n,i,s))});const c=Fe(u,e+le,n,i,s,r);return c===u?t:{type:ue,size:t.size,array:te(t.array,a,c)}}function xt(t,e,n,i,s,r){const a=Xe(n,e),u=vt(t.bitmap,a);if((t.bitmap&a)!==0){const c=t.array[u];if(c.type!==Z){const d=Fe(c,e+le,n,i,s,r);return d===c?t:{type:o,bitmap:t.bitmap,array:te(t.array,u,d)}}const l=c.k;return fe(i,l)?s===c.v?t:{type:o,bitmap:t.bitmap,array:te(t.array,u,{type:Z,k:i,v:s})}:(r.val=!0,{type:o,bitmap:t.bitmap,array:te(t.array,u,fn(e+le,l,c.v,n,i,s))})}else{const c=t.array.length;if(c>=di){const l=new Array(32),d=Pe(n,e);l[d]=xt(kt,e+le,n,i,s,r);let _=0,w=t.bitmap;for(let k=0;k<32;k++){if((w&1)!==0){const b=t.array[_++];l[k]=b}w=w>>>1}return{type:ue,size:c+1,array:l}}else{const l=bi(t.array,u,{type:Z,k:i,v:s});return r.val=!0,{type:o,bitmap:t.bitmap|a,array:l}}}}function wi(t,e,n,i,s,r){if(n===t.hash){const a=Et(t,i);if(a!==-1)return t.array[a].v===s?t:{type:Oe,hash:n,array:te(t.array,a,{type:Z,k:i,v:s})};const u=t.array.length;return r.val=!0,{type:Oe,hash:n,array:te(t.array,u,{type:Z,k:i,v:s})}}return Fe({type:o,bitmap:Xe(t.hash,e),array:[t]},e,n,i,s,r)}function Et(t,e){const n=t.array.length;for(let i=0;i<n;i++)if(fe(e,t.array[i].k))return i;return-1}function Ye(t,e,n,i){switch(t.type){case ue:return gi(t,e,n,i);case o:return ki(t,e,n,i);case Oe:return vi(t,i)}}function gi(t,e,n,i){const s=Pe(n,e),r=t.array[s];if(r!==void 0){if(r.type!==Z)return Ye(r,e+le,n,i);if(fe(i,r.k))return r}}function ki(t,e,n,i){const s=Xe(n,e);if((t.bitmap&s)===0)return;const r=vt(t.bitmap,s),a=t.array[r];if(a.type!==Z)return Ye(a,e+le,n,i);if(fe(i,a.k))return a}function vi(t,e){const n=Et(t,e);if(!(n<0))return t.array[n]}function At(t,e,n,i){switch(t.type){case ue:return xi(t,e,n,i);case o:return Ei(t,e,n,i);case Oe:return Ai(t,i)}}function xi(t,e,n,i){const s=Pe(n,e),r=t.array[s];if(r===void 0)return t;let a;if(r.type===Z){if(!fe(r.k,i))return t}else if(a=At(r,e+le,n,i),a===r)return t;if(a===void 0){if(t.size<=_i){const u=t.array,c=new Array(t.size-1);let l=0,d=0,_=0;for(;l<s;){const w=u[l];w!==void 0&&(c[d]=w,_|=1<<l,++d),++l}for(++l;l<u.length;){const w=u[l];w!==void 0&&(c[d]=w,_|=1<<l,++d),++l}return{type:o,bitmap:_,array:c}}return{type:ue,size:t.size-1,array:te(t.array,s,a)}}return{type:ue,size:t.size,array:te(t.array,s,a)}}function Ei(t,e,n,i){const s=Xe(n,e);if((t.bitmap&s)===0)return t;const r=vt(t.bitmap,s),a=t.array[r];if(a.type!==Z){const u=At(a,e+le,n,i);return u===a?t:u!==void 0?{type:o,bitmap:t.bitmap,array:te(t.array,r,u)}:t.bitmap===s?void 0:{type:o,bitmap:t.bitmap^s,array:nt(t.array,r)}}return fe(i,a.k)?t.bitmap===s?void 0:{type:o,bitmap:t.bitmap^s,array:nt(t.array,r)}:t}function Ai(t,e){const n=Et(t,e);if(n<0)return t;if(t.array.length!==1)return{type:Oe,hash:t.hash,array:nt(t.array,n)}}function hn(t,e){if(t===void 0)return;const n=t.array,i=n.length;for(let s=0;s<i;s++){const r=n[s];if(r!==void 0){if(r.type===Z){e(r.v,r.k);continue}hn(r,e)}}}class ie{static fromObject(e){const n=Object.keys(e);let i=ie.new();for(let s=0;s<n.length;s++){const r=n[s];i=i.set(r,e[r])}return i}static fromMap(e){let n=ie.new();return e.forEach((i,s)=>{n=n.set(s,i)}),n}static new(){return new ie(void 0,0)}constructor(e,n){this.root=e,this.size=n}get(e,n){if(this.root===void 0)return n;const i=Ye(this.root,0,ee(e),e);return i===void 0?n:i.v}set(e,n){const i={val:!1},s=this.root===void 0?kt:this.root,r=Fe(s,0,ee(e),e,n,i);return r===this.root?this:new ie(r,i.val?this.size+1:this.size)}delete(e){if(this.root===void 0)return this;const n=At(this.root,0,ee(e),e);return n===this.root?this:n===void 0?ie.new():new ie(n,this.size-1)}has(e){return this.root===void 0?!1:Ye(this.root,0,ee(e),e)!==void 0}entries(){if(this.root===void 0)return[];const e=[];return this.forEach((n,i)=>e.push([i,n])),e}forEach(e){hn(this.root,e)}hashCode(){let e=0;return this.forEach((n,i)=>{e=e+tt(ee(n),ee(i))|0}),e}equals(e){if(!(e instanceof ie)||this.size!==e.size)return!1;try{return this.forEach((n,i)=>{if(!fe(e.get(i,!n),n))throw qt}),!0}catch(n){if(n===qt)return!1;throw n}}}const qt=Symbol();function Ti(t,e,n){return Hi(e,n,t)}class J extends B{}class Le extends B{}function je(t,e){for(;;){let n=t,i=e;if(n instanceof A)return i;{let s=n.head;t=n.tail,e=m(s,i)}}}function $(t){return je(t,M([]))}function Oi(t,e){for(;;){let n=t,i=e;if(n instanceof A)return i;{let s=n.head;t=n.tail,e=m(s,i)}}}function it(t,e){return Oi($(t),e)}function Tt(t,e,n){for(;;){let i=t,s=e,r=n;if(i instanceof A)return s;{let a=i.head;t=i.tail,e=r(s,a),n=r}}}function Si(t,e,n,i,s,r){for(;;){let a=t,u=e,c=n,l=i,d=s,_=r,w=m(d,c);if(a instanceof A)return l instanceof J?m($(w),_):m(w,_);{let k=a.head,b=a.tail,y=u(d,k);if(l instanceof J)if(y instanceof re)t=b,e=u,n=w,i=l,s=k,r=_;else if(y instanceof ae)t=b,e=u,n=w,i=l,s=k,r=_;else{let f;l instanceof J?f=m($(w),_):f=m(w,_);let x=f;if(b instanceof A)return m(M([k]),x);{let g=b.head,v=b.tail,O,h=u(k,g);h instanceof re?O=new J:h instanceof ae?O=new J:O=new Le;let E=O;t=v,e=u,n=M([k]),i=E,s=g,r=x}}else if(y instanceof re){let f;l instanceof J?f=m($(w),_):f=m(w,_);let x=f;if(b instanceof A)return m(M([k]),x);{let g=b.head,v=b.tail,O,h=u(k,g);h instanceof re?O=new J:h instanceof ae?O=new J:O=new Le;let E=O;t=v,e=u,n=M([k]),i=E,s=g,r=x}}else if(y instanceof ae){let f;l instanceof J?f=m($(w),_):f=m(w,_);let x=f;if(b instanceof A)return m(M([k]),x);{let g=b.head,v=b.tail,O,h=u(k,g);h instanceof re?O=new J:h instanceof ae?O=new J:O=new Le;let E=O;t=v,e=u,n=M([k]),i=E,s=g,r=x}}else t=b,e=u,n=w,i=l,s=k,r=_}}}function Bi(t,e,n,i){for(;;){let s=t,r=e,a=n,u=i;if(s instanceof A)return je(r,u);if(r instanceof A)return je(s,u);{let c=s.head,l=s.tail,d=r.head,_=r.tail,w=a(c,d);w instanceof re?(t=l,e=r,n=a,i=m(c,u)):(w instanceof ae,t=s,e=_,n=a,i=m(d,u))}}}function zi(t,e,n){for(;;){let i=t,s=e,r=n;if(i instanceof A)return $(r);{let a=i.tail;if(a instanceof A){let u=i.head;return $(m($(u),r))}else{let u=i.head,c=a.head,l=a.tail,d=Bi(u,c,s,M([]));t=l,e=s,n=m(d,r)}}}}function Mi(t,e,n,i){for(;;){let s=t,r=e,a=n,u=i;if(s instanceof A)return je(r,u);if(r instanceof A)return je(s,u);{let c=s.head,l=s.tail,d=r.head,_=r.tail,w=a(c,d);w instanceof re?(t=s,e=_,n=a,i=m(d,u)):(w instanceof ae,t=l,e=r,n=a,i=m(c,u))}}}function Ci(t,e,n){for(;;){let i=t,s=e,r=n;if(i instanceof A)return $(r);{let a=i.tail;if(a instanceof A){let u=i.head;return $(m($(u),r))}else{let u=i.head,c=a.head,l=a.tail,d=Mi(u,c,s,M([]));t=l,e=s,n=m(d,r)}}}}function Ni(t,e,n){for(;;){let i=t,s=e,r=n;if(i instanceof A)return i;if(s instanceof J){if(i.tail instanceof A)return i.head;t=zi(i,r,M([])),e=new Le,n=r}else if(i.tail instanceof A){let u=i.head;return $(u)}else t=Ci(i,r,M([])),e=new J,n=r}}function qi(t,e){if(t instanceof A)return t;{let n=t.tail;if(n instanceof A)return t;{let i=t.head,s=n.head,r=n.tail,a,u=e(i,s);u instanceof re?a=new J:u instanceof ae?a=new J:a=new Le;let c=a,l=Si(r,e,M([i]),c,s,M([]));return Ni(l,new J,e)}}}function Di(t,e){for(;;){let n=t,i=e;if(n instanceof A)return i;{let s=n.head;t=n.tail,e=i+s}}}function Ii(t){return Di(t,"")}class dn extends B{constructor(e){super(),this.function=e}}function Ri(t,e){let n=e.function(t),i,s;return i=n[0],s=n[1],s instanceof A?new ce(i):new Te(s)}function Li(t){return new dn(e=>[t,M([])])}function _n(t,e){return new dn(n=>{let i=t.function(n),s,r;return s=i[0],r=i[1],[e(s),r]})}const ji=void 0,Dt={};function Ot(t){return t.toString()}function Pi(t,e){return t.startsWith(e)}function Fi(){return ie.new()}function Ui(t,e){const n=t.get(e,Dt);return n===Dt?new Te(ji):new ce(n)}function Hi(t,e,n){return n.set(t,e)}function Ki(t){return t instanceof ce}function Wi(t,e,n){return t?e:n()}function ge(t){return t}let mn=class extends B{constructor(e){super(),this.dict=e}};function Yi(){return new mn(Fi())}function It(t,e){let n=t.dict,i=Ui(n,e);return Ki(i)}const Vi=void 0;function Xi(t,e){return new mn(Ti(t.dict,e,Vi))}const Gi=ie.new(),Qi=Yi(),Rt=()=>Gi,st=()=>Qi,ze=()=>globalThis?.document,bn="http://www.w3.org/1999/xhtml",yn=1,wn=3,gn=11,Ji=!!globalThis.HTMLElement?.prototype?.moveBefore,P=M([]),Ze=new ci,Zi=new ui,pi=new re,oi=new ae;function kn(t,e){return t.name===e.name?oi:t.name<e.name?pi:Zi}class we extends B{constructor(e,n,i){super(),this.kind=e,this.name=n,this.value=i}}class Lt extends B{constructor(e,n,i){super(),this.kind=e,this.name=n,this.value=i}}let se=class extends B{constructor(e,n,i,s,r,a,u,c,l){super(),this.kind=e,this.name=n,this.handler=i,this.include=s,this.prevent_default=r,this.stop_propagation=a,this.immediate=u,this.debounce=c,this.throttle=l}};class vn extends B{constructor(e,n,i){super(),this.prevent_default=e,this.stop_propagation=n,this.message=i}}class $i extends B{constructor(e){super(),this.kind=e}}function es(t,e){for(;;){let n=t,i=e;if(n instanceof A)return i;{let s=n.head;if(s instanceof we){let r=s.name;if(r==="")t=n.tail,e=i;else if(r==="class"){let a=s.value;if(a==="")t=n.tail,e=i;else{let u=n.tail;if(u instanceof A){let c=s;t=u,e=m(c,i)}else{let c=u.head;if(c instanceof we)if(c.name==="class"){let d=s.kind,_=a,w=u.tail,k=c.value,b=_+" "+k,y=new we(d,"class",b);t=m(y,w),e=i}else{let d=s;t=u,e=m(d,i)}else{let l=s;t=u,e=m(l,i)}}}}else if(r==="style"){let a=s.value;if(a==="")t=n.tail,e=i;else{let u=n.tail;if(u instanceof A){let c=s;t=u,e=m(c,i)}else{let c=u.head;if(c instanceof we)if(c.name==="style"){let d=s.kind,_=a,w=u.tail,k=c.value,b=_+";"+k,y=new we(d,"style",b);t=m(y,w),e=i}else{let d=s;t=u,e=m(d,i)}else{let l=s;t=u,e=m(l,i)}}}}else{let a=s;t=n.tail,e=m(a,i)}}else{let r=s;t=n.tail,e=m(r,i)}}}}function ts(t){if(t instanceof A)return t;if(t.tail instanceof A)return t;{let i=qi(t,(s,r)=>kn(r,s));return es(i,P)}}const xn=0;function ns(t,e){return new we(xn,t,e)}const is=1,En=2;function ss(t,e,n,i,s,r,a,u){return new se(En,t,e,n,i,s,r,a,u)}const An=0,jt=new $i(An),Pt=2;function rs(t,e){return ns(t,e)}class as extends B{constructor(e,n,i){super(),this.synchronous=e,this.before_paint=n,this.after_paint=i}}const us=new as(M([]),M([]),M([]));function Ft(){return us}function ke(){return null}function rt(t,e){const n=t?.get(e);return n!=null?new ce(n):new Te(void 0)}function at(t,e,n){return t??=new Map,t.set(e,n),t}function cs(t,e){return t?.delete(e),t}class Tn extends B{}class On extends B{constructor(e,n){super(),this.key=e,this.parent=n}}class ls extends B{constructor(e,n){super(),this.index=e,this.parent=n}}function fs(t,e){for(;;){let n=t,i=e;if(i instanceof A)return!1;{let s=i.head,r=i.tail,a=Pi(n,s);if(a)return a;t=n,e=r}}}function De(t,e,n){return n===""?new ls(e,t):new On(n,t)}const hs=new Tn,ut="	";function Sn(t,e){for(;;){let n=t,i=e;if(n instanceof Tn){if(i instanceof A)return"";{let s=i.tail;return Ii(s)}}else if(n instanceof On){let s=n.key;t=n.parent,e=m(ut,m(s,i))}else{let s=n.index;t=n.parent,e=m(ut,m(Ot(s),i))}}}function ds(t){return Sn(t,M([]))}function _s(t,e){return e instanceof A?!1:fs(ds(t),e)}const Bn=`
`;function zn(t,e){return Sn(t,M([Bn,e]))}class he extends B{constructor(e,n,i,s,r,a){super(),this.kind=e,this.key=n,this.mapper=i,this.children=s,this.keyed_children=r,this.children_count=a}}class Se extends B{constructor(e,n,i,s,r,a,u,c,l,d){super(),this.kind=e,this.key=n,this.mapper=i,this.namespace=s,this.tag=r,this.attributes=a,this.children=u,this.keyed_children=c,this.self_closing=l,this.void=d}}class Be extends B{constructor(e,n,i,s){super(),this.kind=e,this.key=n,this.mapper=i,this.content=s}}class Mn extends B{constructor(e,n,i,s,r,a,u){super(),this.kind=e,this.key=n,this.mapper=i,this.namespace=s,this.tag=r,this.attributes=a,this.inner_html=u}}function ms(t,e){return e===""?t==="area"||t==="base"||t==="br"||t==="col"||t==="embed"||t==="hr"||t==="img"||t==="input"||t==="link"||t==="meta"||t==="param"||t==="source"||t==="track"?!0:t==="wbr":!1}function W(t){return t instanceof he?1+t.children_count:1}const Cn=0;function bs(t,e,n,i,s){return new he(Cn,t,e,n,i,s)}const Nn=1;function qn(t,e,n,i,s,r,a,u,c){return new Se(Nn,t,e,n,i,ts(s),r,a,u,ms(i,n))}const Dn=2;function In(t,e,n){return new Be(Dn,t,e,n)}const ys=3;function Rn(t,e,n,i,s){for(;;){let r=t,a=e,u=n,c=i,l=s;if(a instanceof A)return[$(c),l];{let d=a.head;if(d instanceof he){let _=d;if(_.key===""){let w=a.tail,k=r+"::"+Ot(u),b=Rn(k,_.children,0,P,ke()),y,f;y=b[0],f=b[1];let x=new he(_.kind,_.key,_.mapper,y,f,_.children_count),g=m(x,c),v=u+1;t=r,e=w,n=v,i=g,s=l}else{let w=d;if(w.key!==""){let k=a.tail,b=r+"::"+w.key,y=ct(b,w),f=m(y,c),x=at(l,b,y),g=u+1;t=r,e=k,n=g,i=f,s=x}else{let k=d,b=a.tail,y=m(k,c),f=u+1;t=r,e=b,n=f,i=y,s=l}}}else{let _=d;if(_.key!==""){let w=a.tail,k=r+"::"+_.key,b=ct(k,_),y=m(b,c),f=at(l,k,b),x=u+1;t=r,e=w,n=x,i=y,s=f}else{let w=d,k=a.tail,b=m(w,c),y=u+1;t=r,e=k,n=y,i=b,s=l}}}}}function ct(t,e){if(e instanceof he){let n=e.children,i=Rn(t,n,0,P,ke()),s,r;return s=i[0],r=i[1],new he(e.kind,t,e.mapper,s,r,e.children_count)}else return e instanceof Se?new Se(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.children,e.keyed_children,e.self_closing,e.void):e instanceof Be?new Be(e.kind,t,e.mapper,e.content):new Mn(e.kind,t,e.mapper,e.namespace,e.tag,e.attributes,e.inner_html)}const Ut=(t,e)=>t===e,Ce=(t,e)=>{if(t===e)return!0;if(t==null||e==null)return!1;const n=typeof t;return n!==typeof e||n!=="object"||t.constructor!==e.constructor?!1:Array.isArray(t)?ws(t,e):gs(t,e)},ws=(t,e)=>{let n=t.length;if(n!==e.length)return!1;for(;n--;)if(!Ce(t[n],e[n]))return!1;return!0},gs=(t,e)=>{const n=Object.keys(t);let i=n.length;if(Object.keys(e).length!==i)return!1;for(;i--;){const s=n[i];if(!Object.hasOwn(e,s)||!Ce(t[s],e[s]))return!1}return!0};class ve extends B{constructor(e,n,i){super(),this.handlers=e,this.dispatched_paths=n,this.next_dispatched_paths=i}}function ks(){return new ve(ke(),P,P)}function vs(t){return new ve(t.handlers,t.next_dispatched_paths,P)}function Ln(t,e,n){return cs(t,zn(e,n))}function Ue(t,e,n){let i=Ln(t.handlers,e,n);return new ve(i,t.dispatched_paths,t.next_dispatched_paths)}function Ht(t,e,n){return Tt(n,t,(i,s)=>{if(s instanceof se){let r=s.name;return Ln(i,e,r)}else return i})}function xs(t,e,n,i){let s=m(e,t.next_dispatched_paths),r=new ve(t.handlers,t.dispatched_paths,s),a=rt(r.handlers,e+Bn+n);if(a instanceof ce){let u=a[0];return[r,Ri(i,u)]}else return[r,new Te(M([]))]}function pe(t,e){return _s(e,t.dispatched_paths)}function jn(t,e,n,i,s){return at(t,zn(n,i),_n(s,r=>new vn(r.prevent_default,r.stop_propagation,e(r.message))))}function He(t,e,n,i,s){let r=jn(t.handlers,e,n,i,s);return new ve(r,t.dispatched_paths,t.next_dispatched_paths)}function Kt(t,e,n,i){return Tt(i,t,(s,r)=>{if(r instanceof se){let a=r.name,u=r.handler;return jn(s,e,n,a,u)}else return s})}function Ne(t,e){let n=Ut(t,ge);return Ut(e,ge)?t:n?e:s=>t(e(s))}function Wt(t,e,n,i){for(;;){let s=t,r=e,a=n,u=i;if(u instanceof A)return s;{let c=u.head,l=u.tail;t=Pn(s,r,a,c),e=r,n=a+W(c),i=l}}}function Pn(t,e,n,i){if(i instanceof he){let s=i.children;return Wt(t,e,n+1,s)}else if(i instanceof Se){let s=i.attributes,r=i.children,a=De(e,n,i.key),c=Ht(t,a,s);return Wt(c,a,0,r)}else{if(i instanceof Be)return t;{let s=i.attributes,r=De(e,n,i.key);return Ht(t,r,s)}}}function ye(t,e,n,i){let s=Pn(t.handlers,e,n,i);return new ve(s,t.dispatched_paths,t.next_dispatched_paths)}function lt(t,e,n,i,s){for(;;){let r=t,a=e,u=n,c=i,l=s;if(l instanceof A)return r;{let d=l.head,_=l.tail;t=Fn(r,a,u,c,d),e=a,n=u,i=c+W(d),s=_}}}function Fn(t,e,n,i,s){if(s instanceof he){let r=s.children,a=Ne(e,s.mapper),u=i+1;return lt(t,a,n,u,r)}else if(s instanceof Se){let r=s.attributes,a=s.children,u=De(n,i,s.key),c=Ne(e,s.mapper),d=Kt(t,c,u,r);return lt(d,c,u,0,a)}else{if(s instanceof Be)return t;{let r=s.attributes,a=De(n,i,s.key),u=Ne(e,s.mapper);return Kt(t,u,a,r)}}}function Ee(t,e,n,i,s){let r=Fn(t.handlers,e,n,i,s);return new ve(r,t.dispatched_paths,t.next_dispatched_paths)}function Es(t,e,n,i,s){let r=lt(t.handlers,e,n,i,s);return new ve(r,t.dispatched_paths,t.next_dispatched_paths)}function Ge(t,e,n){return qn("",ge,"",t,e,n,ke(),!1)}function As(t,e,n,i){return qn("",ge,t,e,n,i,ke(),!1)}function We(t){return In("",ge,t)}function Ts(){return In("",ge,"")}function Os(t,e){for(;;){let n=t,i=e;if(n instanceof A)return i;{let s=n.head;t=n.tail,e=i+W(s)}}}function Un(t){return bs("",ge,t,ke(),Os(t,0))}function Ss(t,e){return Ge("div",t,e)}function Yt(t,e){return Ge("p",t,e)}function Vt(t,e){return Ge("button",t,e)}class ft extends B{constructor(e,n,i,s){super(),this.index=e,this.removed=n,this.changes=i,this.children=s}}class Bs extends B{constructor(e,n){super(),this.kind=e,this.content=n}}class zs extends B{constructor(e,n){super(),this.kind=e,this.inner_html=n}}class Ms extends B{constructor(e,n,i){super(),this.kind=e,this.added=n,this.removed=i}}class Cs extends B{constructor(e,n,i,s){super(),this.kind=e,this.key=n,this.before=i,this.count=s}}class Ns extends B{constructor(e,n,i){super(),this.kind=e,this.key=n,this.count=i}}class qs extends B{constructor(e,n,i,s){super(),this.kind=e,this.from=n,this.count=i,this.with=s}}class Ds extends B{constructor(e,n,i){super(),this.kind=e,this.children=n,this.before=i}}class Is extends B{constructor(e,n,i){super(),this.kind=e,this.from=n,this.count=i}}function Xt(t,e,n,i){return new ft(t,e,n,i)}const Hn=0;function Rs(t){return new Bs(Hn,t)}const Kn=1;function Ls(t){return new zs(Kn,t)}const Wn=2;function Gt(t,e){return new Ms(Wn,t,e)}const ht=3;function js(t,e,n){return new Cs(ht,t,e,n)}const Yn=4;function Ps(t,e){return new Ns(Yn,t,e)}const dt=5;function Me(t,e,n){return new qs(dt,t,e,n)}const _t=6;function Qt(t,e){return new Ds(_t,t,e)}const mt=7;function Fs(t,e){return new Is(mt,t,e)}class Jt extends B{constructor(e,n){super(),this.patch=e,this.events=n}}class Us extends B{constructor(e,n,i){super(),this.added=e,this.removed=n,this.events=i}}function Hs(t,e,n,i){return n==="input"&&e===""||n==="select"&&e===""||n==="textarea"&&e===""?pe(t,i):!1}function Zt(t,e,n,i,s,r,a,u){for(;;){let c=t,l=e,d=n,_=i,w=s,k=r,b=a,y=u;if(k instanceof A){if(w instanceof A)return new Us(b,y,_);{let f=w.head;if(f instanceof se){let x=f,g=w.tail,v=f.name,O=m(x,y),h=Ue(_,l,v);t=c,e=l,n=d,i=h,s=g,r=k,a=b,u=O}else{let x=f,g=w.tail,v=m(x,y);t=c,e=l,n=d,i=_,s=g,r=k,a=b,u=v}}}else if(w instanceof A){let f=k.head;if(f instanceof se){let x=f,g=k.tail,v=f.name,O=f.handler,h=m(x,b),E=He(_,d,l,v,O);t=c,e=l,n=d,i=E,s=w,r=g,a=h,u=y}else{let x=f,g=k.tail,v=m(x,b);t=c,e=l,n=d,i=_,s=w,r=g,a=v,u=y}}else{let f=k.head,x=k.tail,g=w.head,v=w.tail,O=kn(g,f);if(O instanceof re)if(g instanceof se){let h=g.name,E=m(g,y),T=Ue(_,l,h);t=c,e=l,n=d,i=T,s=v,r=k,a=b,u=E}else{let h=m(g,y);t=c,e=l,n=d,i=_,s=v,r=k,a=b,u=h}else if(O instanceof ae)if(f instanceof we)if(g instanceof we){let h,E=f.name;E==="value"||E==="checked"||E==="selected"?h=c||g.value!==f.value:h=g.value!==f.value;let T=h,z;T?z=m(f,b):z=b;let D=z;t=c,e=l,n=d,i=_,s=v,r=x,a=D,u=y}else if(g instanceof se){let h=g.name,E=m(f,b),T=m(g,y),z=Ue(_,l,h);t=c,e=l,n=d,i=z,s=v,r=x,a=E,u=T}else{let h=m(f,b),E=m(g,y);t=c,e=l,n=d,i=_,s=v,r=x,a=h,u=E}else if(f instanceof Lt)if(g instanceof Lt){let h,E=f.name;E==="scrollLeft"||E==="scrollRight"?h=!0:E==="value"||E==="checked"||E==="selected"?h=c||!Ce(g.value,f.value):h=!Ce(g.value,f.value);let T=h,z;T?z=m(f,b):z=b;let D=z;t=c,e=l,n=d,i=_,s=v,r=x,a=D,u=y}else if(g instanceof se){let h=g.name,E=m(f,b),T=m(g,y),z=Ue(_,l,h);t=c,e=l,n=d,i=z,s=v,r=x,a=E,u=T}else{let h=m(f,b),E=m(g,y);t=c,e=l,n=d,i=_,s=v,r=x,a=h,u=E}else if(g instanceof se){let h=f.name,E=f.handler,T=!fe(g.prevent_default,f.prevent_default)||!fe(g.stop_propagation,f.stop_propagation)||g.immediate!==f.immediate||g.debounce!==f.debounce||g.throttle!==f.throttle,z;T?z=m(f,b):z=b;let D=z,R=He(_,d,l,h,E);t=c,e=l,n=d,i=R,s=v,r=x,a=D,u=y}else{let h=f.name,E=f.handler,T=m(f,b),z=m(g,y),D=He(_,d,l,h,E);t=c,e=l,n=d,i=D,s=v,r=x,a=T,u=z}else if(f instanceof se){let h=f.name,E=f.handler,T=m(f,b),z=He(_,d,l,h,E);t=c,e=l,n=d,i=z,s=w,r=x,a=T,u=y}else{let h=m(f,b);t=c,e=l,n=d,i=_,s=w,r=x,a=h,u=y}}}}function bt(t,e,n,i,s,r,a,u,c,l,d,_,w,k){for(;;){let b=t,y=e,f=n,x=i,g=s,v=r,O=a,h=u,E=c,T=l,z=d,D=_,R=w,X=k;if(f instanceof A){if(b instanceof A)return new Jt(new ft(E,O,z,D),X);{let G=b.head,p=b.tail,V;G.key===""||!It(g,G.key)?V=O+W(G):V=O;let S=V,H=ye(X,T,h,G);t=p,e=y,n=f,i=x,s=g,r=v,a=S,u=h,c=E,l=T,d=z,_=D,w=R,k=H}}else if(b instanceof A){let G=Es(X,R,T,h,f),p=Qt(f,h-v),V=m(p,z);return new Jt(new ft(E,O,V,D),G)}else{let G=f.head,p=b.head;if(p.key!==G.key){let V=f.tail,K=b.tail,S=rt(y,G.key),H=rt(x,p.key),I=It(g,p.key);if(S instanceof ce)if(H instanceof ce)if(I)t=K,e=y,n=f,i=x,s=g,r=v-W(p),a=O,u=h,c=E,l=T,d=z,_=D,w=R,k=X;else{let j=S[0],C=W(G),N=h-v,L=js(G.key,N,C),q=m(L,z),U=Xi(g,G.key),F=v+C;t=m(j,b),e=y,n=f,i=x,s=U,r=F,a=O,u=h,c=E,l=T,d=q,_=D,w=R,k=X}else{let j=W(p),C=v-j,N=ye(X,T,h,p),L=Ps(p.key,j),q=m(L,z);t=K,e=y,n=f,i=x,s=g,r=C,a=O,u=h,c=E,l=T,d=q,_=D,w=R,k=N}else if(H instanceof ce){let j=h-v,C=W(G),N=Ee(X,R,T,h,G),L=Qt(M([G]),j),q=m(L,z);t=b,e=y,n=V,i=x,s=g,r=v+C,a=O,u=h+C,c=E,l=T,d=q,_=D,w=R,k=N}else{let j=W(p),C=W(G),N=Me(h-v,j,G),L,U=ye(X,T,h,p);L=Ee(U,R,T,h,G);let F=L;t=K,e=y,n=V,i=x,s=g,r=v-j+C,a=O,u=h+C,c=E,l=T,d=m(N,z),_=D,w=R,k=F}}else{let V=b.head;if(V instanceof he){let K=f.head;if(K instanceof he){let S=K,H=f.tail,I=V,j=b.tail,C=h+1,N=I.children_count,L=S.children_count,q=Ne(R,S.mapper),U=bt(I.children,I.keyed_children,S.children,S.keyed_children,st(),v,0,C,-1,T,P,D,q,X),F;if(U.patch.removed>0){let de=C+L-v,me=Fs(de,U.patch.removed);F=it(U.patch.changes,m(me,z))}else F=it(U.patch.changes,z);let ne=F;t=j,e=y,n=H,i=x,s=g,r=v+L-N,a=O,u=C+L,c=E,l=T,d=ne,_=U.patch.children,w=R,k=U.events}else{let S=K,H=f.tail,I=V,j=b.tail,C=W(I),N=W(S),L=Me(h-v,C,S),q,F=ye(X,T,h,I);q=Ee(F,R,T,h,S);let Q=q;t=j,e=y,n=H,i=x,s=g,r=v-C+N,a=O,u=h+N,c=E,l=T,d=m(L,z),_=D,w=R,k=Q}}else if(V instanceof Se){let K=f.head;if(K instanceof Se){let S=K,H=V;if(H.namespace===S.namespace&&H.tag===S.tag){let I=f.tail,j=b.tail,C=Ne(R,S.mapper),N=De(T,h,S.key),L=Hs(X,S.namespace,S.tag,N),q=Zt(L,N,C,X,H.attributes,S.attributes,P,P),U,F,Q;U=q.added,F=q.removed,Q=q.events;let ne;F instanceof A&&U instanceof A?ne=P:ne=M([Gt(U,F)]);let de=ne,me=bt(H.children,H.keyed_children,S.children,S.keyed_children,st(),0,0,0,h,N,de,P,C,Q),be,xe=me.patch;xe.children instanceof A&&xe.changes instanceof A&&xe.removed===0?be=D:be=m(me.patch,D);let Jn=be;t=j,e=y,n=I,i=x,s=g,r=v,a=O,u=h+1,c=E,l=T,d=z,_=Jn,w=R,k=me.events}else{let I=K,j=f.tail,C=V,N=b.tail,L=W(C),q=W(I),U=Me(h-v,L,I),F,ne=ye(X,T,h,C);F=Ee(ne,R,T,h,I);let de=F;t=N,e=y,n=j,i=x,s=g,r=v-L+q,a=O,u=h+q,c=E,l=T,d=m(U,z),_=D,w=R,k=de}}else{let S=K,H=f.tail,I=V,j=b.tail,C=W(I),N=W(S),L=Me(h-v,C,S),q,F=ye(X,T,h,I);q=Ee(F,R,T,h,S);let Q=q;t=j,e=y,n=H,i=x,s=g,r=v-C+N,a=O,u=h+N,c=E,l=T,d=m(L,z),_=D,w=R,k=Q}}else if(V instanceof Be){let K=f.head;if(K instanceof Be){let S=K;if(V.content===S.content){let I=f.tail;t=b.tail,e=y,n=I,i=x,s=g,r=v,a=O,u=h+1,c=E,l=T,d=z,_=D,w=R,k=X}else{let I=K,j=f.tail,C=b.tail,N=Xt(h,0,M([Rs(I.content)]),P);t=C,e=y,n=j,i=x,s=g,r=v,a=O,u=h+1,c=E,l=T,d=z,_=m(N,D),w=R,k=X}}else{let S=K,H=f.tail,I=V,j=b.tail,C=W(I),N=W(S),L=Me(h-v,C,S),q,F=ye(X,T,h,I);q=Ee(F,R,T,h,S);let Q=q;t=j,e=y,n=H,i=x,s=g,r=v-C+N,a=O,u=h+N,c=E,l=T,d=m(L,z),_=D,w=R,k=Q}}else{let K=f.head;if(K instanceof Mn){let S=K,H=f.tail,I=V,j=b.tail,C=Ne(R,S.mapper),N=De(T,h,S.key),L=Zt(!1,N,C,X,I.attributes,S.attributes,P,P),q,U,F;q=L.added,U=L.removed,F=L.events;let Q;U instanceof A&&q instanceof A?Q=P:Q=M([Gt(q,U)]);let ne=Q,de;I.inner_html===S.inner_html?de=ne:de=m(Ls(S.inner_html),ne);let be=de,xe;be instanceof A?xe=D:xe=m(Xt(h,0,be,M([])),D);let Bt=xe;t=j,e=y,n=H,i=x,s=g,r=v,a=O,u=h+1,c=E,l=T,d=z,_=Bt,w=R,k=F}else{let S=K,H=f.tail,I=V,j=b.tail,C=W(I),N=W(S),L=Me(h-v,C,S),q,F=ye(X,T,h,I);q=Ee(F,R,T,h,S);let Q=q;t=j,e=y,n=H,i=x,s=g,r=v-C+N,a=O,u=h+N,c=E,l=T,d=m(L,z),_=D,w=R,k=Q}}}}}}function Ks(t,e,n){return bt(M([e]),ke(),M([n]),ke(),st(),0,0,0,0,hs,P,P,ge,vs(t))}class Ws{offset=0;#e=null;#s=()=>{};#c=!1;#l=!1;constructor(e,n,{useServerEvents:i=!1,exposeKeys:s=!1}={}){this.#e=e,this.#s=n,this.#c=i,this.#l=s}mount(e){Ke(this.#e,this.#m(this.#e,0,e))}#t=[];push(e){const n=this.offset;n&&(_e(e.changes,i=>{switch(i.kind){case _t:case ht:i.before=(i.before|0)+n;break;case mt:case dt:i.from=(i.from|0)+n;break}}),_e(e.children,i=>{i.index=(i.index|0)+n})),this.#t.push({node:this.#e,patch:e}),this.#h()}#h(){const e=this;for(;e.#t.length;){const{node:n,patch:i}=e.#t.pop();_e(i.changes,a=>{switch(a.kind){case _t:e.#f(n,a.children,a.before);break;case ht:e.#d(n,a.key,a.before,a.count);break;case Yn:e.#r(n,a.key,a.count);break;case mt:e.#n(n,a.from,a.count);break;case dt:e.#i(n,a.from,a.count,a.with);break;case Hn:e.#b(n,a.content);break;case Kn:e.#u(n,a.inner_html);break;case Wn:e.#_(n,a.added,a.removed);break}}),i.removed&&e.#n(n,n.childNodes.length-i.removed,i.removed);let s=-1,r=null;_e(i.children,a=>{const u=a.index|0,c=r&&s-u===1?r.previousSibling:Re(n,u);e.#t.push({node:c,patch:a}),r=c,s=u})}}#f(e,n,i){const s=$t();let r=i|0;_e(n,a=>{const u=this.#m(e,r,a);Ke(s,u),r+=W(a)}),oe(e,s,Re(e,i))}#d(e,n,i,s){let r=en(e,n);const a=Re(e,i);for(let u=0;u<s&&r!==null;++u){const c=r.nextSibling;Ji?e.moveBefore(r,a):oe(e,r,a),r=c}}#r(e,n,i){this.#a(e,en(e,n),i)}#n(e,n,i){this.#a(e,Re(e,n),i)}#a(e,n,i){for(;i-- >0&&n!==null;){const s=n.nextSibling,r=n[Y].key;r&&e[Y].keyedChildren.delete(r);for(const[a,{timeout:u}]of n[Y].debouncers??[])clearTimeout(u);e.removeChild(n),n=s}}#i(e,n,i,s){this.#n(e,n,i);const r=this.#m(e,n,s);oe(e,r,Re(e,n))}#b(e,n){e.data=n??""}#u(e,n){e.innerHTML=n??""}#_(e,n,i){_e(i,s=>{const r=s.name;e[Y].handlers.has(r)?(e.removeEventListener(r,$e),e[Y].handlers.delete(r),e[Y].throttles.has(r)&&e[Y].throttles.delete(r),e[Y].debouncers.has(r)&&(clearTimeout(e[Y].debouncers.get(r).timeout),e[Y].debouncers.delete(r))):(e.removeAttribute(r),nn[r]?.removed?.(e,r))}),_e(n,s=>{this.#w(e,s)})}#m(e,n,i){switch(i.kind){case Nn:{const s=pt(e,n,i);return this.#y(s,i),this.#f(s,i.children),s}case Dn:return ot(e,n,i);case Cn:{const s=$t(),r=ot(e,n,i);Ke(s,r);let a=n+1;return _e(i.children,u=>{Ke(s,this.#m(e,a,u)),a+=W(u)}),s}case ys:{const s=pt(e,n,i);return this.#y(s,i),this.#u(s,i.inner_html),s}}}#y(e,{key:n,attributes:i}){this.#l&&n&&e.setAttribute("data-lustre-key",n),_e(i,s=>this.#w(e,s))}#w(e,n){const{debouncers:i,handlers:s,throttles:r}=e[Y],{kind:a,name:u,value:c,prevent_default:l,stop_propagation:d,immediate:_,include:w,debounce:k,throttle:b}=n;switch(a){case xn:{const y=c??"";if(u==="virtual:defaultValue"){e.defaultValue=y;return}y!==e.getAttribute(u)&&e.setAttribute(u,y),nn[u]?.added?.(e,c);break}case is:e[u]=c;break;case En:{if(s.has(u)&&e.removeEventListener(u,$e),e.addEventListener(u,$e,{passive:l.kind===An}),b>0){const y=r.get(u)??{};y.delay=b,r.set(u,y)}else r.delete(u);if(k>0){const y=i.get(u)??{};y.delay=k,i.set(u,y)}else clearTimeout(i.get(u)?.timeout),i.delete(u);s.set(u,y=>{l.kind===Pt&&y.preventDefault(),d.kind===Pt&&y.stopPropagation();const f=y.type,x=y.currentTarget[Y].path,g=this.#c?Ys(y,w??[]):y,v=r.get(f);if(v){const h=Date.now(),E=v.last||0;h>E+v.delay&&(v.last=h,v.lastEvent=y,this.#s(g,x,f,_))}const O=i.get(f);O&&(clearTimeout(O.timeout),O.timeout=setTimeout(()=>{y!==r.get(f)?.lastEvent&&this.#s(g,x,f,_)},O.delay)),!v&&!O&&this.#s(g,x,f,_)});break}}}}const _e=(t,e)=>{if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else if(t)for(t;t.tail;t=t.tail)e(t.head)},Ke=(t,e)=>t.appendChild(e),oe=(t,e,n)=>t.insertBefore(e,n??null),pt=(t,e,{key:n,tag:i,namespace:s})=>{const r=ze().createElementNS(s||bn,i);return qe(t,r,e,n),r},ot=(t,e,{key:n,content:i})=>{const s=ze().createTextNode(i??"");return qe(t,s,e,n),s},$t=()=>ze().createDocumentFragment(),Re=(t,e)=>t.childNodes[e|0],Y=Symbol("lustre"),qe=(t,e,n=0,i="")=>{const s=`${i||n}`;switch(e.nodeType){case yn:case gn:e[Y]={key:i,path:s,keyedChildren:new Map,handlers:new Map,throttles:new Map,debouncers:new Map};break;case wn:e[Y]={key:i};break}t&&t[Y]&&i&&t[Y].keyedChildren.set(i,new WeakRef(e)),t&&t[Y]&&t[Y].path&&(e[Y].path=`${t[Y].path}${ut}${s}`)},en=(t,e)=>t[Y].keyedChildren.get(e).deref(),$e=t=>{const n=t.currentTarget[Y].handlers.get(t.type);t.type==="submit"&&(t.detail??={},t.detail.formData=[...new FormData(t.target).entries()]),n(t)},Ys=(t,e=[])=>{const n={};(t.type==="input"||t.type==="change")&&e.push("target.value"),t.type==="submit"&&e.push("detail.formData");for(const i of e){const s=i.split(".");for(let r=0,a=t,u=n;r<s.length;r++){if(r===s.length-1){u[s[r]]=a[s[r]];break}u=u[s[r]]??={},a=a[s[r]]}}return n},tn=t=>({added(e){e[t]=!0},removed(e){e[t]=!1}}),Vs=t=>({added(e,n){e[t]=n}}),nn={checked:tn("checked"),selected:tn("selected"),value:Vs("value"),autofocus:{added(t){queueMicrotask(()=>t.focus?.())}},autoplay:{added(t){try{t.play?.()}catch(e){console.error(e)}}}},Xs=t=>{const e=Vn(null,t,"");if(e===null||e.children instanceof A){const n=sn(t);return t.appendChild(n),Ts()}else{if(e.children instanceof Ae&&e.children.tail instanceof A)return e.children.head;{const n=sn(t);return t.insertBefore(n,t.firstChild),Un(e.children)}}},sn=t=>{const e=ze().createTextNode("");return qe(t,e),e},Vn=(t,e,n)=>{switch(e.nodeType){case yn:{const i=e.getAttribute("data-lustre-key");qe(t,e,n,i),i&&e.removeAttribute("data-lustre-key");const s=e.localName,r=e.namespaceURI,a=!r||r===bn;a&&Gs.includes(s)&&Qs(s,e);const u=Js(e),c=rn(e),l=a?Ge(s,u,c):As(r,s,u,c);return i?ct(i,l):l}case wn:return qe(t,e,n),e.data?We(e.data):null;case gn:return qe(t,e,n),e.childNodes.length>0?Un(rn(e)):null;default:return null}},Gs=["input","select","textarea"],Qs=(t,e)=>{const n=e.value,i=e.checked;t==="input"&&e.type==="checkbox"&&!i||t==="input"&&e.type==="radio"&&!i||e.type!=="checkbox"&&e.type!=="radio"&&!n||queueMicrotask(()=>{e.value=n,e.checked=i,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})),ze().activeElement!==e&&e.dispatchEvent(new Event("blur",{bubbles:!0}))})},rn=t=>{let e=null,n=0,i=t.firstChild,s=null;for(;i;){const r=Vn(t,i,n),a=i.nextSibling;if(r){const u=new Ae(r,null);s?s=s.tail=u:s=e=u,n+=1}else t.removeChild(i);i=a}return s?(s.tail=P,e):P},Js=t=>{let e=t.attributes.length,n=P;for(;e-- >0;)n=new Ae(Zs(t.attributes[e]),n);return n},Zs=t=>{const e=t.localName,n=t.value;return rs(e,n)},Xn=()=>!!ze();class ps{constructor(e,[n,i],s,r){this.root=e,this.#e=n,this.#s=s,this.#c=r,this.#h=new Ws(this.root,(a,u,c)=>{const[l,d]=xs(this.#t,u,c,a);if(this.#t=l,d.isOk()){const _=d[0];_.stop_propagation&&a.stopPropagation(),_.prevent_default&&a.preventDefault(),this.dispatch(_.message,!1)}}),this.#l=Xs(this.root),this.#t=ks(),this.#i=!0,this.#u(i)}root=null;set offset(e){this.#h.offset=e}dispatch(e,n=!1){if(this.#i||=n,this.#f)this.#d.push(e);else{const[i,s]=this.#c(this.#e,e);this.#e=i,this.#u(s)}}emit(e,n){(this.root.host??this.root).dispatchEvent(new CustomEvent(e,{detail:n,bubbles:!0,composed:!0}))}#e;#s;#c;#l;#t;#h;#f=!1;#d=[];#r=P;#n=P;#a=null;#i=!1;#b={dispatch:(e,n)=>this.dispatch(e,n),emit:(e,n)=>this.emit(e,n),select:()=>{},root:()=>this.root};#u(e){for(this.#f=!0;;){for(let n=e.synchronous;n.tail;n=n.tail)n.head(this.#b);if(this.#r=un(this.#r,e.before_paint),this.#n=un(this.#n,e.after_paint),!this.#d.length)break;[this.#e,e]=this.#c(this.#e,this.#d.shift())}this.#f=!1,this.#i?(cancelAnimationFrame(this.#a),this.#_()):this.#a||(this.#a=requestAnimationFrame(()=>{this.#_()}))}#_(){this.#i=!1,this.#a=null;const e=this.#s(this.#e),{patch:n,events:i}=Ks(this.#t,this.#l,e);if(this.#t=i,this.#l=e,this.#h.push(n),this.#r instanceof Ae){const s=an(this.#r);this.#r=P,queueMicrotask(()=>{this.#i=!0,this.#u(s)})}if(this.#n instanceof Ae){const s=an(this.#n);this.#n=P,requestAnimationFrame(()=>{this.#i=!0,this.#u(s)})}}}function an(t){return{synchronous:t,after_paint:P,before_paint:P}}function un(t,e){return t instanceof A?e:e instanceof A?t:it(t,e)}class os extends B{constructor(e){super(),this.message=e}}class $s extends B{constructor(e,n){super(),this.name=e,this.data=n}}class er extends B{constructor(e,n,i,s,r,a,u,c){super(),this.open_shadow_root=e,this.adopt_styles=n,this.attributes=i,this.properties=s,this.is_form_associated=r,this.on_form_autofill=a,this.on_form_reset=u,this.on_form_restore=c}}function tr(t){let e=new er(!1,!0,Rt(),Rt(),!1,Ze,Ze,Ze);return Tt(t,e,(n,i)=>i.apply(n))}class St{static start({init:e,update:n,view:i},s,r){if(!Xn())return new Te(new Gn);const a=s instanceof HTMLElement?s:ze().querySelector(s);return a?new ce(new St(a,e(r),n,i)):new Te(new sr(s))}#e;constructor(e,[n,i],s,r){this.#e=new ps(e,[n,i],r,s)}send(e){switch(e.constructor){case os:{this.dispatch(e.message,!1);break}case $s:{this.emit(e.name,e.data);break}}}dispatch(e,n){this.#e.dispatch(e,n)}emit(e,n){this.#e.emit(e,n)}}const nr=St.start;class ir extends B{constructor(e,n,i,s){super(),this.init=e,this.update=n,this.view=i,this.config=s}}class sr extends B{constructor(e){super(),this.selector=e}}class Gn extends B{}function rr(t,e,n){return new ir(t,e,n,tr(P))}function ar(t,e,n){return rr(r=>[t(r),Ft()],(r,a)=>[e(r,a),Ft()],n)}function ur(t,e,n){return Wi(!Xn(),new Te(new Gn),()=>nr(t,e,n))}function cr(t){return!1}function lr(t,e){return ss(t,_n(e,n=>new vn(!1,!1,n)),P,jt,jt,cr(),0,0)}function cn(t){return lr("click",Li(t))}const fr="src/components/counter.gleam";class Qn extends B{}class hr extends B{}function dr(t){return 0}function _r(t,e){return e instanceof Qn?t+2:t-2}function mr(t){let e=Ot(t);return Ss(M([]),M([Yt(M([]),M([We(e+" ✨")])),Yt(M([]),M([Vt(M([cn(new hr)]),M([We("-")])),Vt(M([cn(new Qn)]),M([We("+")]))]))]))}function br(){let t=ar(dr,_r,mr),e=ur(t,"[gleam_example]",void 0),n;if(e instanceof ce)n=e[0];else throw ai("let_assert",fr,"components/counter",10,"main","Pattern match failed, no pattern matched the value.",{value:e,start:204,end:271,pattern_start:215,pattern_end:227});return n}document.addEventListener("DOMContentLoaded",()=>{br()});
